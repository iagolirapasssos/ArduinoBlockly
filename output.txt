app.js:
const express = require('express');
const bodyParser = require('body-parser');
const fs = require('fs').promises;
const { exec } = require('child_process');
const path = require('path');
const { v4: uuidv4 } = require('uuid');
const sanitize = require('sanitize-filename');
const https = require('https');
const selfsigned = require('selfsigned');
const SerialPort = require('serialport');
const session = require('express-session');

const app = express();
const port = 3000;

app.use(bodyParser.json());
app.use('/static', express.static('static'));
app.use(session({
    secret: 'arduino-blockly-secret',
    resave: false,
    saveUninitialized: true,
    cookie: { secure: true }
}));

app.get('/', (req, res) => {
    res.sendFile(__dirname + '/index.html');
});

app.get('/ports', async (req, res) => {
    try {
        const ports = await SerialPort.list();
        res.json(ports);
    } catch (err) {
        console.error('Error listing ports:', err);
        res.status(500).json({ error: 'Failed to list ports' });
    }
});

app.post('/connect', async (req, res) => {
    const { portPath } = req.body;
    if (!portPath) {
        return res.status(400).json({ error: 'Port path is required' });
    }

    try {
        const port = new SerialPort(portPath, { baudRate: 9600 });
        req.session.portPath = portPath;
        res.json({ message: 'Connected successfully' });
    } catch (err) {
        console.error('Error connecting to port:', err);
        res.status(500).json({ error: 'Failed to connect to port' });
    }
});

app.post('/upload', async (req, res) => {
    const { board, code, portPath } = req.body;
    if (!portPath) {
        return res.status(400).json({ error: 'Port path is required' });
    }

    const sketchName = sanitize(`temporary_sketch_${uuidv4()}`);
    const sketchDir = path.join(__dirname, 'sketches', sketchName);
    const sketchPath = path.join(sketchDir, `${sketchName}.ino`);

    try {
        await fs.mkdir(sketchDir, { recursive: true });
        await fs.writeFile(sketchPath, code);

        const command = `arduino-cli compile -b ${board} ${sketchDir} && arduino-cli upload -p ${portPath} -b ${board} ${sketchDir}`;
        exec(command, { cwd: sketchDir }, async (error, stdout, stderr) => {
            await deleteDirectoryRecursive(sketchDir);
            if (error) {
                console.error(`Error: ${error.message}`);
                return res.status(500).json({ error: error.message });
            }
            if (stderr) {
                console.error(`Stderr: ${stderr}`);
                return res.status(500).json({ error: stderr });
            }
            console.log(`Stdout: ${stdout}`);
            res.json({ message: 'Upload successful', output: stdout });
        });
    } catch (err) {
        console.error(`Error: ${err.message}`);
        return res.status(500).json({ error: err.message });
    }
});

async function deleteDirectoryRecursive(directoryPath) {
    try {
        const files = await fs.readdir(directoryPath);
        await Promise.all(files.map(async (file) => {
            const curPath = path.join(directoryPath, file);
            const stat = await fs.lstat(curPath);
            if (stat.isDirectory()) {
                await deleteDirectoryRecursive(curPath);
            } else {
                await fs.unlink(curPath);
            }
        }));
        await fs.rmdir(directoryPath);
    } catch (err) {
        console.error(`Error deleting directory ${directoryPath}:`, err);
    }
}

async function generateCertificate() {
    const attrs = [{ name: 'commonName', value: 'localhost' }];
    const pems = selfsigned.generate(attrs, { days: 365 });
    await fs.writeFile('server.key', pems.private);
    await fs.writeFile('server.crt', pems.cert);
    return { key: pems.private, cert: pems.cert };
}

async function startServer() {
    const { key, cert } = await generateCertificate();
    const httpsServer = https.createServer({ key, cert }, app);
    httpsServer.listen(port, () => {
        console.log(`Server running at https://localhost:${port}`);
    });
}

startServer().catch(console.error);

client.js:
const express = require('express');
const { exec } = require('child_process');
const bodyParser = require('body-parser');
const serialport = require('serialport');
const fs = require('fs').promises;

const app = express();
const port = 3000; // Porta do cliente

app.use(bodyParser.json());

// Rota para detectar portas seriais onde as placas Arduino estão conectadas
app.get('/detect', async (req, res) => {
    try {
        const ports = await serialport.list();
        const boards = ports.map(port => ({
            path: port.path,
            manufacturer: port.manufacturer
        }));
        res.json(boards);
    } catch (err) {
        console.error('Erro ao detectar portas seriais:', err);
        res.status(500).send('Erro ao detectar portas seriais');
    }
});

// Rota para fazer upload de código para a placa Arduino
app.post('/upload', (req, res) => {
    const { board, port, code } = req.body;

    // Criar sketch temporário
    const sketchName = 'temporary_sketch';
    const sketchDir = `/tmp/sketches/${sketchName}`;
    const sketchPath = `${sketchDir}/${sketchName}.ino`;

    fs.mkdir(sketchDir, { recursive: true })
        .then(() => fs.writeFile(sketchPath, code))
        .then(() => {
            const command = `arduino-cli compile -b ${board} ${sketchDir} && arduino-cli upload -p ${port} -b ${board} ${sketchDir}`;

            exec(command, (error, stdout, stderr) => {
                if (error) {
                    console.error(`Erro: ${error.message}`);
                    return res.status(500).send(`Erro: ${error.message}`);
                }
                if (stderr) {
                    console.error(`Erro: ${stderr}`);
                    return res.status(500).send(`Erro: ${stderr}`);
                }
                res.send(`Upload bem-sucedido: ${stdout}`);
            });
        })
        .catch((err) => {
            console.error(`Erro ao criar sketch: ${err.message}`);
            res.status(500).send(`Erro ao criar sketch: ${err.message}`);
        });
});

app.listen(port, () => {
    console.log(`Cliente rodando em http://localhost:${port}`);
});


index.html:
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Arduino Blockly IDE</title>
    <link rel="stylesheet" href="static/style.css">
    <link rel="icon" href="static/favicon.ico">
    <script src="https://unpkg.com/blockly/blockly_compressed.js"></script>
    <script src="https://unpkg.com/blockly/blocks_compressed.js"></script>
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
    <script src="https://unpkg.com/blockly/msg/en.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-dark.min.css">
</head>
<body>
    <header>
        <nav>
            <ul>
                <li><a href="#">File</a>
                    <ul>
                        <li><a href="#" id="saveBtn">Save</a></li>
                        <li><a href="#" id="openBtn">Open</a></li>
                    </ul>
                </li>
                <li><a href="#">Help</a>
                    <ul>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Documents</a></li>
                    </ul>
                </li>
                <li><a href="#" id="executeBtn">Run</a></li>
            </ul>
        </nav>
    </header>
    <div class="container">
        <div class="main-content">
            <div class="editor-container" id="editor-container">
                <div class="arduino-controls-container">
                    <div class="control-group">
                        <label for="serial-port">Select Serial Port:</label>
                        <div class="input-button-group">
                            <select id="serial-port">
                                <option value="">Select a port</option>
                            </select>
                            <button id="connect-button">Conectar ao Arduino</button>
                        </div>
                    </div>
                    <div class="control-group">
                        <label for="board">Select Board:</label>
                        <div class="input-button-group">
                            <select id="board">
                                <option value="arduino:avr:uno">Arduino Uno</option>
                                <option value="arduino:avr:mega">Arduino Mega</option>
                            </select>
                            <button id="upload-button">Upload to Arduino</button>
                        </div>
                    </div>
                </div>
                <p>
                <div id="blocklyDiv" class="blockly-area"></div>
                <xml id="toolbox" style="display: none">
                    <category name="Logic" colour="%{BKY_LOGIC_HUE}">
                        <block type="controls_if"></block>
                        <block type="logic_compare"></block>
                        <block type="logic_operation"></block>
                        <block type="logic_negate"></block>
                        <block type="logic_boolean"></block>
                        <block type="logic_null"></block>
                        <block type="logic_ternary"></block>
                    </category>
                    <category name="Loops" colour="%{BKY_LOOPS_HUE}">
                        <block type="controls_repeat_ext">
                            <value name="TIMES">
                                <shadow type="math_number">
                                    <field name="NUM">10</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="controls_whileUntil"></block>
                        <block type="controls_for">
                            <value name="FROM">
                                <shadow type="math_number">
                                    <field name="NUM">1</field>
                                </shadow>
                            </value>
                            <value name="TO">
                                <shadow type="math_number">
                                    <field name="NUM">10</field>
                                </shadow>
                            </value>
                            <value name="BY">
                                <shadow type="math_number">
                                    <field name="NUM">1</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="controls_forEach"></block>
                        <block type="controls_flow_statements"></block>
                    </category>
                    <category name="Math" colour="%{BKY_MATH_HUE}">
                        <block type="math_number">
                          <field name="NUM">0</field>
                        </block>
                        <block type="math_arithmetic"></block>
                        <block type="math_single"></block>
                        <block type="math_trig"></block>
                        <block type="math_constant"></block>
                        <block type="math_number_property"></block>
                        <block type="math_round"></block>
                        <block type="math_on_list"></block>
                        <block type="math_modulo"></block>
                        <block type="math_constrain">
                            <value name="LOW">
                                <shadow type="math_number">
                                    <field name="NUM">1</field>
                                </shadow>
                            </value>
                            <value name="HIGH">
                                <shadow type="math_number">
                                    <field name="NUM">100</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="math_random_int">
                            <value name="FROM">
                                <shadow type="math_number">
                                    <field name="NUM">1</field>
                                </shadow>
                            </value>
                            <value name="TO">
                                <shadow type="math_number">
                                    <field name="NUM">100</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="math_random_float"></block>
                    </category>
                    <category name="Text" colour="%{BKY_TEXTS_HUE}">
                        <block type="text"></block>
                        <block type="text_join"></block>
                        <block type="text_append">
                            <value name="TEXT">
                                <shadow type="text"></shadow>
                            </value>
                        </block>
                        <block type="text_length"></block>
                        <block type="text_isEmpty"></block>
                        <block type="text_indexOf">
                            <value name="VALUE">
                                <block type="variables_get">
                                    <field name="VAR">text</field>
                                </block>
                            </value>
                        </block>
                        <block type="text_charAt">
                            <value name="VALUE">
                                <block type="variables_get">
                                    <field name="VAR">text</field>
                                </block>
                            </value>
                        </block>
                        <block type="text_getSubstring">
                            <value name="STRING">
                                <block type="variables_get">
                                    <field name="VAR">text</field>
                                </block>
                            </value>
                        </block>
                        <block type="text_changeCase"></block>
                        <block type="text_trim"></block>
                        <block type="text_print"></block>
                        <block type="text_prompt_ext">
                            <value name="TEXT">
                                <shadow type="text"></shadow>
                            </value>
                        </block>
                    </category>
                    <category name="Lists" colour="%{BKY_LISTS_HUE}">
                        <block type="lists_create_with"></block>
                        <block type="lists_create_with">
                            <mutation items="0"></mutation>
                        </block>
                        <block type="lists_repeat">
                            <value name="NUM">
                                <shadow type="math_number">
                                    <field name="NUM">5</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="lists_length"></block>
                        <block type="lists_isEmpty"></block>
                        <block type="lists_indexOf">
                            <value name="VALUE">
                                <block type="variables_get">
                                    <field name="VAR">list</field>
                                </block>
                            </value>
                        </block>
                        <block type="lists_getIndex">
                            <value name="VALUE">
                                <block type="variables_get">
                                    <field name="VAR">list</field>
                                </block>
                            </value>
                        </block>
                        <block type="lists_setIndex">
                            <value name="LIST">
                                <block type="variables_get">
                                    <field name="VAR">list</field>
                                </block>
                            </value>
                        </block>
                        <block type="lists_getSublist">
                            <value name="LIST">
                                <block type="variables_get">
                                    <field name="VAR">list</field>
                                </block>
                            </value>
                        </block>
                        <block type="lists_split">
                            <value name="DELIM">
                                <shadow type="text">
                                    <field name="TEXT">,</field>
                                </shadow>
                            </value>
                        </block>
                        <block type="lists_sort"></block>
                    </category>
                    <category name="Variables" colour="%{BKY_VARIABLES_HUE}">
                        <block type="variables_declare_number"></block>
                        <block type="variables_declare_text"></block>
                        <block type="variables_declare_boolean"></block>
                        <block type="variables_get_number"></block>
                        <block type="variables_get_text"></block>
                        <block type="variables_get_boolean"></block>
                    </category>
                    <category name="Functions" colour="%{BKY_PROCEDURES_HUE}" custom="PROCEDURE"></category>
                    
                    <category name="Custom Code" colour="210">
                        <block type="custom_code"></block>
                    </category>
        
                    <category name="Arduino" colour="230">
                        <block type="arduino_setup"></block>
                        <block type="arduino_loop"></block>
                        <block type="arduino_digital_write"></block>
                        <block type="arduino_digital_read"></block>
                        <block type="serial_begin"></block>
                        <block type="analog_read"></block>
                        <block type="digital_read"></block>
                        <block type="digital_write"></block>
                        <block type="pin_mode"></block>
                        <block type="analog_write"></block>
                        <block type="analog_reference"></block>
                        <block type="delay"></block>
                        <block type="delay_microseconds"></block>
                        <block type="micros"></block>
                        <block type="millis"></block>
                        <block type="no_tone"></block>
                        <block type="tone"></block>
                        <block type="pulse_in"></block>
                        <block type="pulse_in_long"></block>
                    </category>
                    <category name="Extensions" colour="160" id="extensionsCategory">
                        <button text="Send Extension" callbackKey="sendExtension"></button>
                    </category>
                </xml>
            </div>
            <div class="output-container" id="output-container">
                <div class="resize-handle"></div>
                <h2>Output</h2>
                <pre id="code-output" class="hljs language-cpp"></pre>
            </div>
        </div>
        <div class="serial-monitor-container">
            <h2>Monitor Serial</h2>
            <div id="serialMonitor" class="serial-monitor"></div>
        </div>
        <input type="file" id="extensionInput" style="display:none;" />
    </div>

    <script src="static/arduino_blocks.js"></script>
    <script src="static/arduino_generator.js"></script>
    <script src="static/script.js"></script>
    <script src="static/setup.js"></script>
</body>
</html>

LICENSE:
MIT License

Copyright (c) 2024 Iago lira

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.


package.json:
{
  "name": "ArduinoBlockly",
  "version": "1.0.0",
  "description": "Projeto para listar portas seriais e compilar código Arduino usando Blockly",
  "main": "app.js",
  "scripts": {
    "start": "node app.js"
  },
  "dependencies": {
    "@blockly/field-multilineinput": "^5.0.10",
    "@blockly/theme-dark": "^7.0.1",
    "@blockly/workspace-backpack": "^6.0.2",
    "axios": "^1.7.7",
    "body-parser": "^1.20.2",
    "child_process": "^1.0.2",
    "cors": "^2.8.5",
    "ejs": "^3.1.10",
    "express": "^4.19.2",
    "express-session": "^1.18.1",
    "https-localhost": "^4.7.1",
    "jsdom": "^21.1.2",
    "module-alias": "^2.2.3",
    "sanitize-filename": "^1.6.3",
    "selfsigned": "^2.4.1",
    "serialport": "^9.2.8",
    "uuid": "^10.0.0",
    "ws": "^7.5.10"
  },
  "author": "Francisco Iago Lira Passos",
  "license": "MIT"
}


package-lock.json:
{
  "name": "ArduinoBlockly",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "ArduinoBlockly",
      "version": "1.0.0",
      "license": "MIT",
      "dependencies": {
        "@blockly/field-multilineinput": "^5.0.10",
        "@blockly/theme-dark": "^7.0.1",
        "@blockly/workspace-backpack": "^6.0.2",
        "axios": "^1.7.7",
        "body-parser": "^1.20.2",
        "child_process": "^1.0.2",
        "cors": "^2.8.5",
        "ejs": "^3.1.10",
        "express": "^4.19.2",
        "express-session": "^1.18.1",
        "https-localhost": "^4.7.1",
        "jsdom": "^21.1.2",
        "module-alias": "^2.2.3",
        "sanitize-filename": "^1.6.3",
        "selfsigned": "^2.4.1",
        "serialport": "^9.2.8",
        "uuid": "^10.0.0",
        "ws": "^7.5.10"
      }
    },
    "node_modules/@blockly/field-multilineinput": {
      "version": "5.0.10",
      "resolved": "https://registry.npmjs.org/@blockly/field-multilineinput/-/field-multilineinput-5.0.10.tgz",
      "integrity": "sha512-rjdbR2GCy/YN4gRbTbCfXeYZEgcOA0IGDhE2A+wCv/+7dFf2c98Mgs315jEZkI3B67zBYFyadooiNlFpnAGKnQ==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8.0.0"
      },
      "peerDependencies": {
        "blockly": "^11.0.0"
      }
    },
    "node_modules/@blockly/theme-dark": {
      "version": "7.0.7",
      "resolved": "https://registry.npmjs.org/@blockly/theme-dark/-/theme-dark-7.0.7.tgz",
      "integrity": "sha512-p6urK/fLyzLhrHcSo1DhEvRkasyJjBYDpBPgPipAqGNJRlLR1pbNoBRcrpv3RzTgKIKbA0TeawsWHrHOXG0S/w==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8.17.0"
      },
      "peerDependencies": {
        "blockly": "^11.0.0"
      }
    },
    "node_modules/@blockly/workspace-backpack": {
      "version": "6.0.9",
      "resolved": "https://registry.npmjs.org/@blockly/workspace-backpack/-/workspace-backpack-6.0.9.tgz",
      "integrity": "sha512-ZWy01XH0Vgo/DGE5SorhFT0iuY1WbPQH1nn6hycQU30QJohpYiulD79AMBsGcNCp9Gbg60Atf02Wk7Y3FjXKww==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8.17.0"
      },
      "peerDependencies": {
        "blockly": "^11.0.0"
      }
    },
    "node_modules/@serialport/binding-abstract": {
      "version": "9.2.3",
      "resolved": "https://registry.npmjs.org/@serialport/binding-abstract/-/binding-abstract-9.2.3.tgz",
      "integrity": "sha512-cQs9tbIlG3P0IrOWyVirqlhWuJ7Ms2Zh9m2108z6Y5UW/iVj6wEOiW8EmK9QX9jmJXYllE7wgGgvVozP5oCj3w==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.2"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/binding-abstract/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/@serialport/binding-abstract/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/@serialport/binding-mock": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/binding-mock/-/binding-mock-9.2.4.tgz",
      "integrity": "sha512-dpEhACCs44oQhh6ajJfJdvQdK38Vq0N4W6iD/gdplglDCK7qXRQCMUjJIeKdS/HSEiWkC3bwumUhUufdsOyT4g==",
      "license": "MIT",
      "dependencies": {
        "@serialport/binding-abstract": "9.2.3",
        "debug": "^4.3.2"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/binding-mock/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/@serialport/binding-mock/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/@serialport/bindings": {
      "version": "9.2.8",
      "resolved": "https://registry.npmjs.org/@serialport/bindings/-/bindings-9.2.8.tgz",
      "integrity": "sha512-hSLxTe0tADZ3LMMGwvEJWOC/TaFQTyPeFalUCsJ1lSQ0k6bPF04JwrtB/C81GetmDBTNRY0GlD0SNtKCc7Dr5g==",
      "hasInstallScript": true,
      "license": "MIT",
      "dependencies": {
        "@serialport/binding-abstract": "9.2.3",
        "@serialport/parser-readline": "9.2.4",
        "bindings": "^1.5.0",
        "debug": "^4.3.2",
        "nan": "^2.15.0",
        "prebuild-install": "^7.0.0"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/bindings/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/@serialport/bindings/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/@serialport/parser-byte-length": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-byte-length/-/parser-byte-length-9.2.4.tgz",
      "integrity": "sha512-sQD/iw4ZMU3xW9PLi0/GlvU6Y623jGeWecbMkO7izUo/6P7gtfv1c9ikd5h0kwL8AoAOpQA1lxdHIKox+umBUg==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-cctalk": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-cctalk/-/parser-cctalk-9.2.4.tgz",
      "integrity": "sha512-T4TU5vQMwmo9AB3gQLFDWbfJXlW5jd9guEsB/nqKjFHTv0FXPdZ7DQ2TpSp8RnHWxU3GX6kYTaDO20BKzc8GPQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-delimiter": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-delimiter/-/parser-delimiter-9.2.4.tgz",
      "integrity": "sha512-4nvTAoYAgkxFiXrkI+3CA49Yd43CODjeszh89EK+I9c8wOZ+etZduRCzINYPiy26g7zO+GRAb9FoPCsY+sYcbQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-inter-byte-timeout": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-inter-byte-timeout/-/parser-inter-byte-timeout-9.2.4.tgz",
      "integrity": "sha512-SOAdvr0oBQIOCXX198hiTlxs4JTKg9j5piapw5tNq52fwDOWdbYrFneT/wN04UTMKaDrJuEvXq6T4rv4j7nJ5A==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-readline": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-readline/-/parser-readline-9.2.4.tgz",
      "integrity": "sha512-Z1/qrZTQUVhNSJP1hd9YfDvq0o7d87rNwAjjRKbVpa7Qi51tG5BnKt43IV3NFMyBlVcRe0rnIb3tJu57E0SOwg==",
      "license": "MIT",
      "dependencies": {
        "@serialport/parser-delimiter": "9.2.4"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-ready": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-ready/-/parser-ready-9.2.4.tgz",
      "integrity": "sha512-Pyi94Itjl6qAURwIZr/gmZpMAyTmKXThm6vL5DoAWGQjcRHWB0gwv2TY2v7N+mQLJYUKU3cMnvnATXxHm7xjxw==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/parser-regex": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/parser-regex/-/parser-regex-9.2.4.tgz",
      "integrity": "sha512-sI/cVvPOYz+Dbv4ZdnW16qAwvXiFf/1pGASQdbveRTlgJDdz7sRNlCBifzfTN2xljwvCTZYqiudKvDdC1TepRQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/stream": {
      "version": "9.2.4",
      "resolved": "https://registry.npmjs.org/@serialport/stream/-/stream-9.2.4.tgz",
      "integrity": "sha512-bLye8Ub4vUFQGmkh8qEqehr7SE7EJs2yDs0h9jzuL5oKi+F34CFmWkEErO8GAOQ8YNn7p6b3GxUgs+0BrHHDZQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.2"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/@serialport/stream/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/@serialport/stream/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "license": "MIT",
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@types/node": {
      "version": "22.7.5",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-22.7.5.tgz",
      "integrity": "sha512-jML7s2NAzMWc//QSJ1a3prpk78cOPchGvXJsC3C6R6PSMoooztvRVQEz89gmBTBY1SPMaqo5teB4uNHPdetShQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.19.2"
      }
    },
    "node_modules/@types/node-forge": {
      "version": "1.3.11",
      "resolved": "https://registry.npmjs.org/@types/node-forge/-/node-forge-1.3.11.tgz",
      "integrity": "sha512-FQx220y22OKNTqaByeBGqHWYz4cl94tpcxeFdvBo3wjG6XPBuZ0BNgNZRV5J5TFmmcsJ4IzsLkmGRiQbnYsBEQ==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/abab": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/abab/-/abab-2.0.6.tgz",
      "integrity": "sha512-j2afSsaIENvHZN2B8GOpF566vZ5WVk5opAiMTvWgaQT8DkbOqsTfvNAvHoRGU2zzP8cPoqys+xHTRDWW8L+/BA==",
      "deprecated": "Use your platform's native atob() and btoa() methods instead",
      "license": "BSD-3-Clause"
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/acorn": {
      "version": "8.12.1",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.12.1.tgz",
      "integrity": "sha512-tcpGyI9zbizT9JbV6oYE477V6mTlXvvi0T0G3SNIYE2apm/G5huBa1+K89VGeovbg+jycCrfhl3ADxErOuO6Jg==",
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-globals": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/acorn-globals/-/acorn-globals-7.0.1.tgz",
      "integrity": "sha512-umOSDSDrfHbTNPuNpC2NSnnA3LUrqpevPb4T9jRx4MagXNS0rs+gwiTcAvqCRmsD6utzsrzNt+ebm00SNWiC3Q==",
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.1.0",
        "acorn-walk": "^8.0.2"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.3.4",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.3.4.tgz",
      "integrity": "sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==",
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.11.0"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/agent-base/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/agent-base/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/appdata-path": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/appdata-path/-/appdata-path-1.0.0.tgz",
      "integrity": "sha512-ZbH3ezXfnT/YE3NdqduIt4lBV+H0ybvA2Qx3K76gIjQvh8gROpDFdDLpx6B1QJtW7zxisCbpTlCLhKqoR8cDBw==",
      "license": "MIT"
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==",
      "license": "MIT"
    },
    "node_modules/async": {
      "version": "3.2.6",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.6.tgz",
      "integrity": "sha512-htCUDlxyyCLMgaM3xXg0C0LW2xqfuQ6p05pCEIsXuyQ+a1koYKTuBMzRNwmybfLgvJDMd0r1LTn4+E0Ti6C2AA==",
      "license": "MIT"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.7.7",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.7.7.tgz",
      "integrity": "sha512-S4kL7XrjgBmvdGut0sN3yJxqYzrDOnivkBiN0OFs6hLiUam3UPvswUo0kqGyhqUZGEOytHyumEdXsAkgCOUf3Q==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "license": "MIT"
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/bindings": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/bindings/-/bindings-1.5.0.tgz",
      "integrity": "sha512-p2q/t/mhvuOj/UeLlV6566GD/guowlr0hHxClI0W9m7MWYkL1F0hLo+0Aexs9HSPCtR1SXQ0TD3MMKrXZajbiQ==",
      "license": "MIT",
      "dependencies": {
        "file-uri-to-path": "1.0.0"
      }
    },
    "node_modules/bl": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/bl/-/bl-4.1.0.tgz",
      "integrity": "sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==",
      "license": "MIT",
      "dependencies": {
        "buffer": "^5.5.0",
        "inherits": "^2.0.4",
        "readable-stream": "^3.4.0"
      }
    },
    "node_modules/blockly": {
      "version": "11.1.1",
      "resolved": "https://registry.npmjs.org/blockly/-/blockly-11.1.1.tgz",
      "integrity": "sha512-PmInYM9zH1HcYMffqnfmeu2O3g0intsowy08S0KDu3q8/95TfGo1tcDYpeWNQDkPOEzN1yy3oocsRO4NPDHtKA==",
      "license": "Apache-2.0",
      "peer": true,
      "dependencies": {
        "jsdom": "23.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/agent-base": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.1.tgz",
      "integrity": "sha512-H0TSyFNDMomMNJQBn8wFV5YC/2eJ+VXECwOadZJT554xP6cODZHPX3H9QMQECxvrgiSOP1pHjy1sMWQVYJOUOA==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/blockly/node_modules/data-urls": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/data-urls/-/data-urls-5.0.0.tgz",
      "integrity": "sha512-ZYP5VBHshaDAiVZxjbRVcFJpc+4xGgT0bK3vzy1HLN8jTO975HEbuYzZJcHoQEY5K1a0z8YayJkyVETa08eNTg==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "whatwg-mimetype": "^4.0.0",
        "whatwg-url": "^14.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/blockly/node_modules/html-encoding-sniffer": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/html-encoding-sniffer/-/html-encoding-sniffer-4.0.0.tgz",
      "integrity": "sha512-Y22oTqIU4uuPgEemfz7NDJz6OeKf12Lsu+QC+s3BVpda64lTiMYCyGwg5ki4vFxkMwQdeZDl2adZoqUgdFuTgQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "whatwg-encoding": "^3.1.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/http-proxy-agent": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-7.0.2.tgz",
      "integrity": "sha512-T1gkAiYYDWYx3V5Bmyu7HcfcvL7mUrTWiM6yOfa3PIphViJ/gFPbvidQ+veqSOHci/PxBcDabeUNCzpOODJZig==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "agent-base": "^7.1.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/blockly/node_modules/https-proxy-agent": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.5.tgz",
      "integrity": "sha512-1e4Wqeblerz+tMKPIq2EMGiiWW1dIjZOksyHWSUm1rmuvw/how9hBHZ38lAGj5ID4Ik6EdkOw7NmWPy6LAwalw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "agent-base": "^7.0.2",
        "debug": "4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/blockly/node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/blockly/node_modules/jsdom": {
      "version": "23.0.0",
      "resolved": "https://registry.npmjs.org/jsdom/-/jsdom-23.0.0.tgz",
      "integrity": "sha512-cbL/UCtohJguhFC7c2/hgW6BeZCNvP7URQGnx9tSJRYKCdnfbfWOrtuLTMfiB2VxKsx5wPHVsh/J0aBy9lIIhQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "cssstyle": "^3.0.0",
        "data-urls": "^5.0.0",
        "decimal.js": "^10.4.3",
        "form-data": "^4.0.0",
        "html-encoding-sniffer": "^4.0.0",
        "http-proxy-agent": "^7.0.0",
        "https-proxy-agent": "^7.0.2",
        "is-potential-custom-element-name": "^1.0.1",
        "nwsapi": "^2.2.7",
        "parse5": "^7.1.2",
        "rrweb-cssom": "^0.6.0",
        "saxes": "^6.0.0",
        "symbol-tree": "^3.2.4",
        "tough-cookie": "^4.1.3",
        "w3c-xmlserializer": "^5.0.0",
        "webidl-conversions": "^7.0.0",
        "whatwg-encoding": "^3.1.1",
        "whatwg-mimetype": "^4.0.0",
        "whatwg-url": "^14.0.0",
        "ws": "^8.14.2",
        "xml-name-validator": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "canvas": "^3.0.0"
      },
      "peerDependenciesMeta": {
        "canvas": {
          "optional": true
        }
      }
    },
    "node_modules/blockly/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT",
      "peer": true
    },
    "node_modules/blockly/node_modules/tr46": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-5.0.0.tgz",
      "integrity": "sha512-tk2G5R2KRwBd+ZN0zaEXpmzdKyOYksXwywulIX95MBODjSzMIuQnQ3m8JxgbhnL1LeVo7lqQKsYa1O3Htl7K5g==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/w3c-xmlserializer": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/w3c-xmlserializer/-/w3c-xmlserializer-5.0.0.tgz",
      "integrity": "sha512-o8qghlI8NZHU1lLPrpi2+Uq7abh4GGPpYANlalzWxyWteJOCsr/P+oPBA49TOLu5FTZO4d3F9MnWJfiMo4BkmA==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "xml-name-validator": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/whatwg-encoding": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-3.1.1.tgz",
      "integrity": "sha512-6qN4hJdMwfYBtE3YBTTHhoeuUrDBPZmbQaxWAqSALV/MeEnR5z1xd8UKud2RAkFoPkmB+hli1TZSnyi84xz1vQ==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "iconv-lite": "0.6.3"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/whatwg-mimetype": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-4.0.0.tgz",
      "integrity": "sha512-QaKxh0eNIi2mE9p2vEdzfagOKHCcj1pJ56EEHGQOVxp8r9/iszLUUV7v89x9O1p/T+NlTM5W7jW6+cz4Fq1YVg==",
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/whatwg-url": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-14.0.0.tgz",
      "integrity": "sha512-1lfMEm2IEr7RIV+f4lUNPOqfFL+pO+Xw3fJSqmjX9AbXcXcYOkCe1P6+9VBZB6n94af16NfZf+sSk0JCBZC9aw==",
      "license": "MIT",
      "peer": true,
      "dependencies": {
        "tr46": "^5.0.0",
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/blockly/node_modules/ws": {
      "version": "8.18.0",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.0.tgz",
      "integrity": "sha512-8VbfWfHLbbwu3+N6OKsOMpBdT4kXPDDB9cJk2bJ6mh9ucxdlnNvH1e+roYkKmN9Nxw2yjz7VzeO9oOz2zJ04Pw==",
      "license": "MIT",
      "peer": true,
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/blockly/node_modules/xml-name-validator": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-5.0.0.tgz",
      "integrity": "sha512-EvGK8EJ3DhaHfbRlETOWAS5pO9MZITeauHKJyb8wyajUfQUenkIg2MvLDTZ4T/TgIcm3HU0TFBgWWboAZ30UHg==",
      "license": "Apache-2.0",
      "peer": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.3.tgz",
      "integrity": "sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.11",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.11.tgz",
      "integrity": "sha512-iCuPHDFgrHX7H2vEI/5xpz07zSHB00TpugqhmYtVmMO6518mCuRMoOYFldEBl0g187ufozdaHgWKcYFb61qGiA==",
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/buffer": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.1.13"
      }
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.7.tgz",
      "integrity": "sha512-GHTSNSYICQ7scH7sZ+M2rFopRoLh8t2bLSW6BbgrtLsahOIB5iyAVJf9GjWK3cYTDaMj4XdBpM1cA6pIS0Kv2w==",
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/child_process": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/child_process/-/child_process-1.0.2.tgz",
      "integrity": "sha512-Wmza/JzL0SiWz7kl6MhIKT5ceIlnFPJX+lwUGj7Clhy5MMldsSoJR0+uvRzOS5Kv45Mq7t1PoE8TsOA9bzvb6g==",
      "license": "ISC"
    },
    "node_modules/chownr": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-1.1.4.tgz",
      "integrity": "sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr/b0YL8/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg==",
      "license": "ISC"
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/compressible": {
      "version": "2.0.18",
      "resolved": "https://registry.npmjs.org/compressible/-/compressible-2.0.18.tgz",
      "integrity": "sha512-AF3r7P5dWxL8MxyITRMlORQNaOA2IkAFaTr4k7BUumjPtRpGDTZpl0Pb1XCO6JeDCBdp126Cgs9sMxqSjgYyRg==",
      "license": "MIT",
      "dependencies": {
        "mime-db": ">= 1.43.0 < 2"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/compression": {
      "version": "1.7.4",
      "resolved": "https://registry.npmjs.org/compression/-/compression-1.7.4.tgz",
      "integrity": "sha512-jaSIDzP9pZVS4ZfQ+TzvtiWhdpFhE2RDHz8QJkpX9SIpLq88VueF5jJw6t+6CUQcAoA6t+x89MLrWAqpfDE8iQ==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.5",
        "bytes": "3.0.0",
        "compressible": "~2.0.16",
        "debug": "2.6.9",
        "on-headers": "~1.0.2",
        "safe-buffer": "5.1.2",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/compression/node_modules/bytes": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.0.0.tgz",
      "integrity": "sha512-pMhOfFDPiv9t5jjIXkHosWmkSyQbvsgEVNkz0ERHbuLh2T/7j4Mqqpz523Fe8MVY89KC6Sh/QfS2sM+SjgFDcw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/compression/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "license": "MIT"
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
      "integrity": "sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "license": "MIT"
    },
    "node_modules/core-util-is": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
      "integrity": "sha512-ZQBvi1DcpJ4GDqanjucZ2Hj3wEO5pZDS89BWbkcrvdxksJorwUDDZamX9ldFkp9aw2lmBDLgkObEA4DWNJ9FYQ==",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/cssstyle": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssstyle/-/cssstyle-3.0.0.tgz",
      "integrity": "sha512-N4u2ABATi3Qplzf0hWbVCdjenim8F3ojEXpBDF5hBpjzW182MjNGLqfmQ0SkSPeQ+V86ZXgeH8aXj6kayd4jgg==",
      "license": "MIT",
      "dependencies": {
        "rrweb-cssom": "^0.6.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/data-urls": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/data-urls/-/data-urls-4.0.0.tgz",
      "integrity": "sha512-/mMTei/JXPqvFqQtfyTowxmJVwr2PVAeCcDxyFf6LhoOu/09TX2OX3kb2wzi4DMXcfj4OItwDOnhl5oziPnT6g==",
      "license": "MIT",
      "dependencies": {
        "abab": "^2.0.6",
        "whatwg-mimetype": "^3.0.0",
        "whatwg-url": "^12.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/decimal.js": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/decimal.js/-/decimal.js-10.4.3.tgz",
      "integrity": "sha512-VBBaLc1MgL5XpzgIP7ny5Z6Nx3UrRkIViUkPUdtl9aya5amy3De1gsUUSB1g3+3sExYNjCAsAznmukyxCb1GRA==",
      "license": "MIT"
    },
    "node_modules/decompress-response": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
      "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
      "license": "MIT",
      "dependencies": {
        "mimic-response": "^3.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/deep-extend": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/deep-extend/-/deep-extend-0.6.0.tgz",
      "integrity": "sha512-LOHxIOaPYdHlJRtCQfDIVZtfw/ufM8+rVj649RIHzcm/vGwQRXFt6OPqIFWsm2XEMrNIEtWR64sY1LEKD2vAOA==",
      "license": "MIT",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/detect-libc": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.0.3.tgz",
      "integrity": "sha512-bwy0MGW55bG41VqxxypOsdSdGqLwXPI/focwgTYCFMbdUiBAxLg9CFzG08sz2aqzknwiX7Hkl0bQENjg8iLByw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/detect-node": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/detect-node/-/detect-node-2.1.0.tgz",
      "integrity": "sha512-T0NIuQpnTvFDATNuHN5roPwSBG83rFsuO+MXXH9/3N1eFbn4wcPjttvjMLEPWJ0RGUYgQE7cGgS3tNxbqCGM7g==",
      "license": "MIT"
    },
    "node_modules/domexception": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/domexception/-/domexception-4.0.0.tgz",
      "integrity": "sha512-A2is4PLG+eeSfoTMA95/s4pvAoSo2mKtiM5jlHkAVewmiO8ISFTFKZjH7UAM1Atli/OT/7JHOrJRJiMKUZKYBw==",
      "deprecated": "Use your platform's native DOMException instead",
      "license": "MIT",
      "dependencies": {
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/ejs": {
      "version": "3.1.10",
      "resolved": "https://registry.npmjs.org/ejs/-/ejs-3.1.10.tgz",
      "integrity": "sha512-UeJmFfOrAQS8OJWPZ4qtgHyWExa088/MtK5UEyoJGFH67cDEXkZSviOiKRCZ4Xij0zxI3JECgYs3oKx+AizQBA==",
      "license": "Apache-2.0",
      "dependencies": {
        "jake": "^10.8.5"
      },
      "bin": {
        "ejs": "bin/cli.js"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/end-of-stream": {
      "version": "1.4.4",
      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.4.tgz",
      "integrity": "sha512-+uw1inIHVPQoaVuHzRyXd21icM+cnt4CzD5rW+NC1wjOUSTOs+Te7FOv7AhN7vS9x/oIyhLP5PR1H+phQAHu5Q==",
      "license": "MIT",
      "dependencies": {
        "once": "^1.4.0"
      }
    },
    "node_modules/entities": {
      "version": "4.5.0",
      "resolved": "https://registry.npmjs.org/entities/-/entities-4.5.0.tgz",
      "integrity": "sha512-V0hjH4dGPh9Ao5p0MoRY6BVqtwCjhz6vI5LT8AJ55H+4g9/4vbHx1I54fS0XuclLhDHArPQCiMjDxjaL8fPxhw==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.12"
      },
      "funding": {
        "url": "https://github.com/fb55/entities?sponsor=1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.0.tgz",
      "integrity": "sha512-jxayLKShrEqqzJ0eumQbVhTYQM27CfT1T35+gCgDFoL82JLsXqTJ76zv6A0YLOgEnLUMvLzsDsGIrl8NFpT2gQ==",
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.4"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/escodegen": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/escodegen/-/escodegen-2.1.0.tgz",
      "integrity": "sha512-2NlIDTwUWJN0mRPQOdtQBzbUHvdGY2P1VXSyU83Q3xKxM7WHX2Ql8dKq782Q9TgQUNOLEzEYu9bzLNj1q88I5w==",
      "license": "BSD-2-Clause",
      "dependencies": {
        "esprima": "^4.0.1",
        "estraverse": "^5.2.0",
        "esutils": "^2.0.2"
      },
      "bin": {
        "escodegen": "bin/escodegen.js",
        "esgenerate": "bin/esgenerate.js"
      },
      "engines": {
        "node": ">=6.0"
      },
      "optionalDependencies": {
        "source-map": "~0.6.1"
      }
    },
    "node_modules/esprima": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/esprima/-/esprima-4.0.1.tgz",
      "integrity": "sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==",
      "license": "BSD-2-Clause",
      "bin": {
        "esparse": "bin/esparse.js",
        "esvalidate": "bin/esvalidate.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/expand-template": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/expand-template/-/expand-template-2.0.3.tgz",
      "integrity": "sha512-XYfuKMvj4O35f/pOXLObndIRvyQ+/+6AhODh+OKWj9S9498pHHn/IMszH+gt0fBCRWMNfk1ZSp5x3AifmnI2vg==",
      "license": "(MIT OR WTFPL)",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/express": {
      "version": "4.21.1",
      "resolved": "https://registry.npmjs.org/express/-/express-4.21.1.tgz",
      "integrity": "sha512-YSFlK1Ee0/GC8QaO91tHcDxJiE/X4FbpAyQWkxAvG6AXCuR65YzK8ua6D9hvi/TzUfZMpc+BwuM1IPw8fmQBiQ==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.10",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      }
    },
    "node_modules/express-session": {
      "version": "1.18.1",
      "resolved": "https://registry.npmjs.org/express-session/-/express-session-1.18.1.tgz",
      "integrity": "sha512-a5mtTqEaZvBCL9A9aqkrtfz+3SMDhOVUnjafjo+s7A9Txkq+SVX2DLvSp1Zrv4uCXa3lMSK3viWnh9Gg07PBUA==",
      "license": "MIT",
      "dependencies": {
        "cookie": "0.7.2",
        "cookie-signature": "1.0.7",
        "debug": "2.6.9",
        "depd": "~2.0.0",
        "on-headers": "~1.0.2",
        "parseurl": "~1.3.3",
        "safe-buffer": "5.2.1",
        "uid-safe": "~2.1.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/express-session/node_modules/cookie": {
      "version": "0.7.2",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.2.tgz",
      "integrity": "sha512-yki5XnKuf750l50uGTllt6kKILY4nQ1eNIQatoXEByZ5dWgnKqbnqmTrBE5B4N7lrMJKQ2ytWMiTO2o0v6Ew/w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express-session/node_modules/cookie-signature": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.7.tgz",
      "integrity": "sha512-NXdYc3dLr47pBkpUCHtKSwIOQXLVn8dZEuywboCOJY/osA0wFSLlSawr3KN8qXJEyX66FcONTH8EIlVuK0yyFA==",
      "license": "MIT"
    },
    "node_modules/file-uri-to-path": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/file-uri-to-path/-/file-uri-to-path-1.0.0.tgz",
      "integrity": "sha512-0Zt+s3L7Vf1biwWZ29aARiVYLx7iMGnEUl9x33fbB/j3jR81u/O2LbqK+Bm1CDSNDKVtJ/YjwY7TUd5SkeLQLw==",
      "license": "MIT"
    },
    "node_modules/filelist": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/filelist/-/filelist-1.0.4.tgz",
      "integrity": "sha512-w1cEuf3S+DrLCQL7ET6kz+gmlJdbq9J7yXCSjK/OZCPA+qEN1WyF4ZAf0YYJa4/shHJra2t/d/r8SV4Ji+x+8Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "minimatch": "^5.0.1"
      }
    },
    "node_modules/filelist/node_modules/brace-expansion": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.1.tgz",
      "integrity": "sha512-XnAIvQ8eM+kC6aULx6wuQiwVsnzsi9d3WxzV3FpWTGA19F621kwdbsAcFKXgKUHZWsy+mY6iL1sHTxWEFCytDA==",
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/filelist/node_modules/minimatch": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
      "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.1.tgz",
      "integrity": "sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.9",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.9.tgz",
      "integrity": "sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.1.tgz",
      "integrity": "sha512-tzN8e4TX8+kkxGPK8D5u0FNmjPUjw3lwC9lSLxxoB/+GtsJG91CO8bSWy73APlgAZzZbXEYZJuxjkHH2w+Ezhw==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fs-constants": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs-constants/-/fs-constants-1.0.0.tgz",
      "integrity": "sha512-y6OAwoSIf7FyjMIv94u+b5rdheZEjzR63GTyZJm5qh4Bi+2YgwLCcI/fPFZkL5PSixOt6ZNKm+w+Hfp/Bciwow==",
      "license": "MIT"
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.2.4.tgz",
      "integrity": "sha512-5uYhsJH8VJBTv7oslg4BznJYhDoRI6waYCxMmCdnTrcCrHA/fCFKoTFz2JKKE0HdDFUF7/oQuhzumXJK7paBRQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "has-proto": "^1.0.1",
        "has-symbols": "^1.0.3",
        "hasown": "^2.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/github-from-package": {
      "version": "0.0.0",
      "resolved": "https://registry.npmjs.org/github-from-package/-/github-from-package-0.0.0.tgz",
      "integrity": "sha512-SyHy3T1v2NUXn29OsWdxmK6RwHD+vkj3v8en8AOBZ1wBQ/hCAQ5bAQTD02kW4W9tUp/3Qh6J8r9EvntiyCmOOw==",
      "license": "MIT"
    },
    "node_modules/gopd": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.0.1.tgz",
      "integrity": "sha512-d65bNlIadxvpb/A2abVdlqKqV563juRnZ1Wtk6s1sIR8uNsXR70xqIzVqxVf1eTqDunwT2MkczEeaezCKTZhwA==",
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.1.3"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/handle-thing": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/handle-thing/-/handle-thing-2.0.1.tgz",
      "integrity": "sha512-9Qn4yBxelxoh2Ow62nP+Ka/kMnOXRi8BXnRaUwezLNhqelnN49xKz4F/dPP8OYLxLxq6JDtZb2i9XznUQbNPTg==",
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.0.3.tgz",
      "integrity": "sha512-SJ1amZAJUiZS+PhsVLf5tGydlaVB8EdFpaSO4gmiUKUOxk8qzn5AIy4ZeJUmh22znIdk/uMAUT2pl3FxzVUH+Q==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.0.3.tgz",
      "integrity": "sha512-l3LCuF6MgDNwTDKkdYGEihYjt5pRPbEg46rtlmnSPlUbgmB8LOIrKJbYYFBSbnPaJexMKtiPO8hmeRjRz2Td+A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hpack.js": {
      "version": "2.1.6",
      "resolved": "https://registry.npmjs.org/hpack.js/-/hpack.js-2.1.6.tgz",
      "integrity": "sha512-zJxVehUdMGIKsRaNt7apO2Gqp0BdqW5yaiGHXXmbpvxgBYVZnAql+BJb4RO5ad2MgpbZKn5G6nMnegrH1FcNYQ==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.1",
        "obuf": "^1.0.0",
        "readable-stream": "^2.0.1",
        "wbuf": "^1.1.0"
      }
    },
    "node_modules/hpack.js/node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "license": "MIT",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/hpack.js/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/hpack.js/node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/html-encoding-sniffer": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/html-encoding-sniffer/-/html-encoding-sniffer-3.0.0.tgz",
      "integrity": "sha512-oWv4T4yJ52iKrufjnyZPkrN0CH3QnrUqdB6In1g5Fe1mia8GmF36gnfNySxoZtxD5+NmYw1EElVXiBk93UeskA==",
      "license": "MIT",
      "dependencies": {
        "whatwg-encoding": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/http-deceiver": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/http-deceiver/-/http-deceiver-1.2.7.tgz",
      "integrity": "sha512-LmpOGxTfbpgtGVxJrj5k7asXHCgNZp5nLfp+hWc8QQRqtb7fUy6kRY3BO1h9ddF6yIPYUARgxGOwB42DnxIaNw==",
      "license": "MIT"
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "license": "MIT",
      "dependencies": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/http-proxy-agent/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/http-proxy-agent/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/https-localhost": {
      "version": "4.7.1",
      "resolved": "https://registry.npmjs.org/https-localhost/-/https-localhost-4.7.1.tgz",
      "integrity": "sha512-rl+NFV0l67/0W7fZwk4LB5gS6HdhtSFLpCpf1N+KD5WQAXtPXX1QE8H0cP8VNJii18rtpTkE9eAHdUfJ0goAnQ==",
      "license": "AGPL-3.0",
      "dependencies": {
        "appdata-path": "^1.0.0",
        "compression": "^1.7.4",
        "cors": "^2.8.5",
        "express": "^4.17.1",
        "spdy": "^4.0.2",
        "uglify-js": "^3.15.1"
      },
      "bin": {
        "serve": "index.js"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "license": "MIT",
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/https-proxy-agent/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/https-proxy-agent/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ieee754": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "BSD-3-Clause"
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/ini": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==",
      "license": "ISC"
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-potential-custom-element-name": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/is-potential-custom-element-name/-/is-potential-custom-element-name-1.0.1.tgz",
      "integrity": "sha512-bCYeRA2rVibKZd+s2625gGnGF/t7DSqDs4dP7CrLA1m7jKWz6pps0LpYLJN8Q64HtmPKJ1hrN3nzPNKFEKOUiQ==",
      "license": "MIT"
    },
    "node_modules/isarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
      "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
      "license": "MIT"
    },
    "node_modules/jake": {
      "version": "10.9.2",
      "resolved": "https://registry.npmjs.org/jake/-/jake-10.9.2.tgz",
      "integrity": "sha512-2P4SQ0HrLQ+fw6llpLnOaGAvN2Zu6778SJMrCUwns4fOoG9ayrTiZk3VV8sCPkVZF8ab0zksVpS8FDY5pRCNBA==",
      "license": "Apache-2.0",
      "dependencies": {
        "async": "^3.2.3",
        "chalk": "^4.0.2",
        "filelist": "^1.0.4",
        "minimatch": "^3.1.2"
      },
      "bin": {
        "jake": "bin/cli.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/jsdom": {
      "version": "21.1.2",
      "resolved": "https://registry.npmjs.org/jsdom/-/jsdom-21.1.2.tgz",
      "integrity": "sha512-sCpFmK2jv+1sjff4u7fzft+pUh2KSUbUrEHYHyfSIbGTIcmnjyp83qg6qLwdJ/I3LpTXx33ACxeRL7Lsyc6lGQ==",
      "license": "MIT",
      "dependencies": {
        "abab": "^2.0.6",
        "acorn": "^8.8.2",
        "acorn-globals": "^7.0.0",
        "cssstyle": "^3.0.0",
        "data-urls": "^4.0.0",
        "decimal.js": "^10.4.3",
        "domexception": "^4.0.0",
        "escodegen": "^2.0.0",
        "form-data": "^4.0.0",
        "html-encoding-sniffer": "^3.0.0",
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.1",
        "is-potential-custom-element-name": "^1.0.1",
        "nwsapi": "^2.2.4",
        "parse5": "^7.1.2",
        "rrweb-cssom": "^0.6.0",
        "saxes": "^6.0.0",
        "symbol-tree": "^3.2.4",
        "tough-cookie": "^4.1.2",
        "w3c-xmlserializer": "^4.0.0",
        "webidl-conversions": "^7.0.0",
        "whatwg-encoding": "^2.0.0",
        "whatwg-mimetype": "^3.0.0",
        "whatwg-url": "^12.0.1",
        "ws": "^8.13.0",
        "xml-name-validator": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      },
      "peerDependencies": {
        "canvas": "^2.5.0"
      },
      "peerDependenciesMeta": {
        "canvas": {
          "optional": true
        }
      }
    },
    "node_modules/jsdom/node_modules/ws": {
      "version": "8.18.0",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.0.tgz",
      "integrity": "sha512-8VbfWfHLbbwu3+N6OKsOMpBdT4kXPDDB9cJk2bJ6mh9ucxdlnNvH1e+roYkKmN9Nxw2yjz7VzeO9oOz2zJ04Pw==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.53.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.53.0.tgz",
      "integrity": "sha512-oHlN/w+3MQ3rba9rqFr6V/ypF10LSkdwUysQL7GkXoTgIWeV+tcXGA852TBxH+gsh8UWoyhR1hKcoMJTuWflpg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types/node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-response": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
      "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/minimalistic-assert": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/minimalistic-assert/-/minimalistic-assert-1.0.1.tgz",
      "integrity": "sha512-UtJcAD4yEaGtjPezWuO9wC4nwUnVH/8/Im3yEHQP4b67cXlD/Qr9hdITCU1xDbSEXg2XKNaP8jsReV7vQd00/A==",
      "license": "ISC"
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/mkdirp-classic": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/mkdirp-classic/-/mkdirp-classic-0.5.3.tgz",
      "integrity": "sha512-gKLcREMhtuZRwRAfqP3RFW+TK4JqApVBtOIftVgjuABpAtpxhPGaDcfvbhNvD0B8iD1oUr/txX35NjcaY6Ns/A==",
      "license": "MIT"
    },
    "node_modules/module-alias": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/module-alias/-/module-alias-2.2.3.tgz",
      "integrity": "sha512-23g5BFj4zdQL/b6tor7Ji+QY4pEfNH784BMslY9Qb0UnJWRAt+lQGLYmRaM0KDBwIG23ffEBELhZDP2rhi9f/Q==",
      "license": "MIT"
    },
    "node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/nan": {
      "version": "2.22.0",
      "resolved": "https://registry.npmjs.org/nan/-/nan-2.22.0.tgz",
      "integrity": "sha512-nbajikzWTMwsW+eSsNm3QwlOs7het9gGJU5dDZzRTQGk03vyBOauxgI4VakDzE0PtsGTmXPsXTbbjVhRwR5mpw==",
      "license": "MIT"
    },
    "node_modules/napi-build-utils": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/napi-build-utils/-/napi-build-utils-1.0.2.tgz",
      "integrity": "sha512-ONmRUqK7zj7DWX0D9ADe03wbwOBZxNAfF20PlGfCWQcD3+/MakShIHrMqx9YwPTfxDdF1zLeL+RGZiR9kGMLdg==",
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/node-abi": {
      "version": "3.68.0",
      "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.68.0.tgz",
      "integrity": "sha512-7vbj10trelExNjFSBm5kTvZXXa7pZyKWx9RCKIyqe6I9Ev3IzGpQoqBP3a+cOdxY+pWj6VkP28n/2wWysBHD/A==",
      "license": "MIT",
      "dependencies": {
        "semver": "^7.3.5"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/node-forge": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/node-forge/-/node-forge-1.3.1.tgz",
      "integrity": "sha512-dPEtOeMvF9VMcYV/1Wb8CPoVAXtp6MKMlcbAt4ddqmGqUJ6fQZFXkNZNkNlfevtNkGtaSoXf/vNNNSvgrdXwtA==",
      "license": "(BSD-3-Clause OR GPL-2.0)",
      "engines": {
        "node": ">= 6.13.0"
      }
    },
    "node_modules/nwsapi": {
      "version": "2.2.13",
      "resolved": "https://registry.npmjs.org/nwsapi/-/nwsapi-2.2.13.tgz",
      "integrity": "sha512-cTGB9ptp9dY9A5VbMSe7fQBcl/tt22Vcqdq8+eN93rblOuE0aCFu4aZ2vMwct/2t+lFnosm8RkQW1I0Omb1UtQ==",
      "license": "MIT"
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.2",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.2.tgz",
      "integrity": "sha512-IRZSRuzJiynemAXPYtPe5BoI/RESNYR7TYm50MC5Mqbd3Jmw5y790sErYw3V6SryFJD64b74qQQs9wn5Bg/k3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/obuf": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/obuf/-/obuf-1.1.2.tgz",
      "integrity": "sha512-PX1wu0AmAdPqOL1mWhqmlOd8kOIZQwGZw6rh7uby9fTc5lhaOWFLX3I6R1hrF9k3zUY40e6igsLGkDXK92LJNg==",
      "license": "MIT"
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/on-headers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/on-headers/-/on-headers-1.0.2.tgz",
      "integrity": "sha512-pZAE+FJLoyITytdqK0U5s+FIpjN0JP3OzFi/u8Rx+EV5/W+JTWGXG8xFzevE7AjBfDqHv/8vL8qQsIhHnqRkrA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/parse5": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/parse5/-/parse5-7.2.0.tgz",
      "integrity": "sha512-ZkDsAOcxsUMZ4Lz5fVciOehNcJ+Gb8gTzcA4yl3wnc273BAybYWrQ+Ks/OjCjSEpjvQkDSeZbybK9qj2VHHdGA==",
      "license": "MIT",
      "dependencies": {
        "entities": "^4.5.0"
      },
      "funding": {
        "url": "https://github.com/inikulin/parse5?sponsor=1"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.10",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.10.tgz",
      "integrity": "sha512-7lf7qcQidTku0Gu3YDPc8DJ1q7OOucfa/BSsIwjuh56VU7katFvuM8hULfkwB3Fns/rsVF7PwPKVw1sl5KQS9w==",
      "license": "MIT"
    },
    "node_modules/prebuild-install": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/prebuild-install/-/prebuild-install-7.1.2.tgz",
      "integrity": "sha512-UnNke3IQb6sgarcZIDU3gbMeTp/9SSU1DAIkil7PrqG1vZlBtY5msYccSKSHDqa3hNg436IXK+SNImReuA1wEQ==",
      "license": "MIT",
      "dependencies": {
        "detect-libc": "^2.0.0",
        "expand-template": "^2.0.3",
        "github-from-package": "0.0.0",
        "minimist": "^1.2.3",
        "mkdirp-classic": "^0.5.3",
        "napi-build-utils": "^1.0.1",
        "node-abi": "^3.3.0",
        "pump": "^3.0.0",
        "rc": "^1.2.7",
        "simple-get": "^4.0.0",
        "tar-fs": "^2.0.0",
        "tunnel-agent": "^0.6.0"
      },
      "bin": {
        "prebuild-install": "bin.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/process-nextick-args": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/process-nextick-args/-/process-nextick-args-2.0.1.tgz",
      "integrity": "sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag==",
      "license": "MIT"
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/psl": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/psl/-/psl-1.9.0.tgz",
      "integrity": "sha512-E/ZsdU4HLs/68gYzgGTkMicWTLPdAftJLfJFlLUAAKZGkStNU72sZjT66SnMDVOfOWY/YAoiD7Jxa9iHvngcag==",
      "license": "MIT"
    },
    "node_modules/pump": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.2.tgz",
      "integrity": "sha512-tUPXtzlGM8FE3P0ZL6DVs/3P58k9nk8/jZeQCurTJylQA8qFYzHFfhBJkuqyE0FifOsQ0uKWekiZ5g8wtr28cw==",
      "license": "MIT",
      "dependencies": {
        "end-of-stream": "^1.1.0",
        "once": "^1.3.1"
      }
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.13.0.tgz",
      "integrity": "sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/querystringify": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/querystringify/-/querystringify-2.2.0.tgz",
      "integrity": "sha512-FIqgj2EUvTa7R50u0rGsyTftzjYmv/a3hO345bZNrqabNqjtgiDMgmo4mkUjd+nzU5oF3dClKqFIPUKybUyqoQ==",
      "license": "MIT"
    },
    "node_modules/random-bytes": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/random-bytes/-/random-bytes-1.0.0.tgz",
      "integrity": "sha512-iv7LhNVO047HzYR3InF6pUcUsPQiHTM1Qal51DcGSuZFBil1aBBWG5eHPNek7bvILMaYJ/8RU1e8w1AMdHmLQQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.2.tgz",
      "integrity": "sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/rc": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/rc/-/rc-1.2.8.tgz",
      "integrity": "sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==",
      "license": "(BSD-2-Clause OR MIT OR Apache-2.0)",
      "dependencies": {
        "deep-extend": "^0.6.0",
        "ini": "~1.3.0",
        "minimist": "^1.2.0",
        "strip-json-comments": "~2.0.1"
      },
      "bin": {
        "rc": "cli.js"
      }
    },
    "node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/requires-port": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/requires-port/-/requires-port-1.0.0.tgz",
      "integrity": "sha512-KigOCHcocU3XODJxsu8i/j8T9tzT4adHiecwORRQ0ZZFcp7ahwXuRU1m+yuO90C5ZUyGeGfocHDI14M3L3yDAQ==",
      "license": "MIT"
    },
    "node_modules/rrweb-cssom": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/rrweb-cssom/-/rrweb-cssom-0.6.0.tgz",
      "integrity": "sha512-APM0Gt1KoXBz0iIkkdB/kfvGOwC4UuJFeG/c+yV7wSc7q96cG/kJ0HiYCnzivD9SB53cLV1MlHFNfOuPaadYSw==",
      "license": "MIT"
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/sanitize-filename": {
      "version": "1.6.3",
      "resolved": "https://registry.npmjs.org/sanitize-filename/-/sanitize-filename-1.6.3.tgz",
      "integrity": "sha512-y/52Mcy7aw3gRm7IrcGDFx/bCk4AhRh2eI9luHOQM86nZsqwiRkkq2GekHXBBD+SmPidc8i2PqtYZl+pWJ8Oeg==",
      "license": "WTFPL OR ISC",
      "dependencies": {
        "truncate-utf8-bytes": "^1.0.0"
      }
    },
    "node_modules/saxes": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/saxes/-/saxes-6.0.0.tgz",
      "integrity": "sha512-xAg7SOnEhrm5zI3puOOKyy1OMcMlIJZYNJY7xLBwSze0UjhPLnWfj2GF2EpT0jmzaJKIWKHLsaSSajf35bcYnA==",
      "license": "ISC",
      "dependencies": {
        "xmlchars": "^2.2.0"
      },
      "engines": {
        "node": ">=v12.22.7"
      }
    },
    "node_modules/select-hose": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/select-hose/-/select-hose-2.0.0.tgz",
      "integrity": "sha512-mEugaLK+YfkijB4fx0e6kImuJdCIt2LxCRcbEYPqRGCs4F2ogyfZU5IAZRdjCP8JPq2AtdNoC/Dux63d9Kiryg==",
      "license": "MIT"
    },
    "node_modules/selfsigned": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/selfsigned/-/selfsigned-2.4.1.tgz",
      "integrity": "sha512-th5B4L2U+eGLq1TVh7zNRGBapioSORUeymIydxgFpwww9d2qyKvtuPU2jJuHvYAwwqi2Y596QBL3eEqcPEYL8Q==",
      "license": "MIT",
      "dependencies": {
        "@types/node-forge": "^1.3.0",
        "node-forge": "^1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/semver": {
      "version": "7.6.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.6.3.tgz",
      "integrity": "sha512-oVekP1cKtI+CTDvHWYFUcMtsK/00wmAEfyqKfNdARm8u1wNVhSgaX7A8d4UuIlUI5e84iEwOhs7ZPYRmzU9U6A==",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/send/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/serialport": {
      "version": "9.2.8",
      "resolved": "https://registry.npmjs.org/serialport/-/serialport-9.2.8.tgz",
      "integrity": "sha512-FsWpMQgSJxi93JgWl5xM1f9/Z8IjRJuaUEoHqLf8FPBLw7gMhInuHOBhI2onQufWIYPGTz3H3oGcu1nCaK1EfA==",
      "license": "MIT",
      "dependencies": {
        "@serialport/binding-mock": "9.2.4",
        "@serialport/bindings": "9.2.8",
        "@serialport/parser-byte-length": "9.2.4",
        "@serialport/parser-cctalk": "9.2.4",
        "@serialport/parser-delimiter": "9.2.4",
        "@serialport/parser-inter-byte-timeout": "9.2.4",
        "@serialport/parser-readline": "9.2.4",
        "@serialport/parser-ready": "9.2.4",
        "@serialport/parser-regex": "9.2.4",
        "@serialport/stream": "9.2.4",
        "debug": "^4.3.2"
      },
      "engines": {
        "node": ">=10.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/serialport/donate"
      }
    },
    "node_modules/serialport/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/serialport/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/side-channel": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.0.6.tgz",
      "integrity": "sha512-fDW/EZ6Q9RiO8eFG8Hj+7u/oW+XrPTIChwCOM2+th2A6OblDtYYIpve9m+KvI9Z4C9qSEXlaGR6bTEYHReuglA==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.4",
        "object-inspect": "^1.13.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/simple-concat": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/simple-concat/-/simple-concat-1.0.1.tgz",
      "integrity": "sha512-cSFtAPtRhljv69IK0hTVZQ+OfE9nePi/rtJmw5UjHeVyVroEqJXP1sFztKUy1qU+xvz3u/sfYJLa947b7nAN2Q==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/simple-get": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/simple-get/-/simple-get-4.0.1.tgz",
      "integrity": "sha512-brv7p5WgH0jmQJr1ZDDfKDOSeWWg+OVypG99A/5vYGPqJ6pxiaHLy8nxtFjBA7oMa01ebA9gfh1uMCFqOuXxvA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "decompress-response": "^6.0.0",
        "once": "^1.3.1",
        "simple-concat": "^1.0.0"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "license": "BSD-3-Clause",
      "optional": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/spdy": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/spdy/-/spdy-4.0.2.tgz",
      "integrity": "sha512-r46gZQZQV+Kl9oItvl1JZZqJKGr+oEkB08A6BzkiR7593/7IbtuncXHd2YoYeTsG4157ZssMu9KYvUHLcjcDoA==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.1.0",
        "handle-thing": "^2.0.0",
        "http-deceiver": "^1.2.7",
        "select-hose": "^2.0.0",
        "spdy-transport": "^3.0.0"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/spdy-transport": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/spdy-transport/-/spdy-transport-3.0.0.tgz",
      "integrity": "sha512-hsLVFE5SjA6TCisWeJXFKniGGOpBgMLmerfO2aCyCU5s7nJ/rpAepqmFifv/GCbSbueEeAJJnmSQ2rKC/g8Fcw==",
      "license": "MIT",
      "dependencies": {
        "debug": "^4.1.0",
        "detect-node": "^2.0.4",
        "hpack.js": "^2.1.6",
        "obuf": "^1.1.2",
        "readable-stream": "^3.0.6",
        "wbuf": "^1.7.3"
      }
    },
    "node_modules/spdy-transport/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/spdy-transport/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/spdy/node_modules/debug": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.7.tgz",
      "integrity": "sha512-Er2nc/H7RrMXZBFCEim6TCmMk02Z8vLC2Rbi1KEBggpo0fS6l0S1nnapwmIi3yW/+GOJap1Krg4w0Hg80oCqgQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/spdy/node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/string_decoder": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.3.0.tgz",
      "integrity": "sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.2.0"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-2.0.1.tgz",
      "integrity": "sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/symbol-tree": {
      "version": "3.2.4",
      "resolved": "https://registry.npmjs.org/symbol-tree/-/symbol-tree-3.2.4.tgz",
      "integrity": "sha512-9QNk5KwDF+Bvz+PyObkmSYjI5ksVUYtjW7AU22r2NKcfLJcXp96hkDWU3+XndOsUb+AQ9QhfzfCT2O+CNWT5Tw==",
      "license": "MIT"
    },
    "node_modules/tar-fs": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/tar-fs/-/tar-fs-2.1.1.tgz",
      "integrity": "sha512-V0r2Y9scmbDRLCNex/+hYzvp/zyYjvFbHPNgVTKfQvVrb6guiE/fxP+XblDNR011utopbkex2nM4dHNV6GDsng==",
      "license": "MIT",
      "dependencies": {
        "chownr": "^1.1.1",
        "mkdirp-classic": "^0.5.2",
        "pump": "^3.0.0",
        "tar-stream": "^2.1.4"
      }
    },
    "node_modules/tar-stream": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-2.2.0.tgz",
      "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
      "license": "MIT",
      "dependencies": {
        "bl": "^4.0.3",
        "end-of-stream": "^1.4.1",
        "fs-constants": "^1.0.0",
        "inherits": "^2.0.3",
        "readable-stream": "^3.1.1"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/tough-cookie": {
      "version": "4.1.4",
      "resolved": "https://registry.npmjs.org/tough-cookie/-/tough-cookie-4.1.4.tgz",
      "integrity": "sha512-Loo5UUvLD9ScZ6jh8beX1T6sO1w2/MpCRpEP7V280GKMVUQ0Jzar2U3UJPsrdbziLEMMhu3Ujnq//rhiFuIeag==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "psl": "^1.1.33",
        "punycode": "^2.1.1",
        "universalify": "^0.2.0",
        "url-parse": "^1.5.3"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/tr46": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-4.1.1.tgz",
      "integrity": "sha512-2lv/66T7e5yNyhAAC4NaKe5nVavzuGJQVVtRYLyQ2OI8tsJ61PMLlelehb0wi2Hx6+hT/OJUWZcw8MjlSRnxvw==",
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/truncate-utf8-bytes": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/truncate-utf8-bytes/-/truncate-utf8-bytes-1.0.2.tgz",
      "integrity": "sha512-95Pu1QXQvruGEhv62XCMO3Mm90GscOCClvrIUwCM0PYOXK3kaF3l3sIHxx71ThJfcbM2O5Au6SO3AWCSEfW4mQ==",
      "license": "WTFPL",
      "dependencies": {
        "utf8-byte-length": "^1.0.1"
      }
    },
    "node_modules/tunnel-agent": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/tunnel-agent/-/tunnel-agent-0.6.0.tgz",
      "integrity": "sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/uglify-js": {
      "version": "3.19.3",
      "resolved": "https://registry.npmjs.org/uglify-js/-/uglify-js-3.19.3.tgz",
      "integrity": "sha512-v3Xu+yuwBXisp6QYTcH4UbH+xYJXqnq2m/LtQVWKWzYc1iehYnLixoQDN9FH6/j9/oybfd6W9Ghwkl8+UMKTKQ==",
      "license": "BSD-2-Clause",
      "bin": {
        "uglifyjs": "bin/uglifyjs"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/uid-safe": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/uid-safe/-/uid-safe-2.1.5.tgz",
      "integrity": "sha512-KPHm4VL5dDXKz01UuEd88Df+KzynaohSL9fBh096KWAxSKZQDI2uBrVqtvRM4rwrIrRRKsdLNML/lnaaVSRioA==",
      "license": "MIT",
      "dependencies": {
        "random-bytes": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/undici-types": {
      "version": "6.19.8",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.19.8.tgz",
      "integrity": "sha512-ve2KP6f/JnbPBFyobGHuerC9g1FYGn/F8n1LWTwNxCEzd6IfqTwUQcNXgEtmmQ6DlRrC1hrSrBnCZPokRrDHjw==",
      "license": "MIT"
    },
    "node_modules/universalify": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-0.2.0.tgz",
      "integrity": "sha512-CJ1QgKmNg3CwvAv/kOFmtnEN05f0D/cn9QntgNOQlQF9dgvVTHj3t+8JPdjqawCHk7V/KA+fbUqzZ9XWhcqPUg==",
      "license": "MIT",
      "engines": {
        "node": ">= 4.0.0"
      }
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/url-parse": {
      "version": "1.5.10",
      "resolved": "https://registry.npmjs.org/url-parse/-/url-parse-1.5.10.tgz",
      "integrity": "sha512-WypcfiRhfeUP9vvF0j6rw0J3hrWrw6iZv3+22h6iRMJ/8z1Tj6XfLP4DsUix5MhMPnXpiHDoKyoZ/bdCkwBCiQ==",
      "license": "MIT",
      "dependencies": {
        "querystringify": "^2.1.1",
        "requires-port": "^1.0.0"
      }
    },
    "node_modules/utf8-byte-length": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/utf8-byte-length/-/utf8-byte-length-1.0.5.tgz",
      "integrity": "sha512-Xn0w3MtiQ6zoz2vFyUVruaCL53O/DwUvkEeOvj+uulMm0BkUGYWmBYVyElqZaSLhY6ZD0ulfU3aBra2aVT4xfA==",
      "license": "(WTFPL OR MIT)"
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "license": "MIT"
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "10.0.0",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-10.0.0.tgz",
      "integrity": "sha512-8XkAphELsDnEGrDxUOHB3RGvXz6TeuYSGEZBOjtTtPm2lwhGBjLgOzLHB63IUWfBpNucQjND6d3AOudO+H3RWQ==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/w3c-xmlserializer": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/w3c-xmlserializer/-/w3c-xmlserializer-4.0.0.tgz",
      "integrity": "sha512-d+BFHzbiCx6zGfz0HyQ6Rg69w9k19nviJspaj4yNscGjrHu94sVP+aRm75yEbCh+r2/yR+7q6hux9LVtbuTGBw==",
      "license": "MIT",
      "dependencies": {
        "xml-name-validator": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/wbuf": {
      "version": "1.7.3",
      "resolved": "https://registry.npmjs.org/wbuf/-/wbuf-1.7.3.tgz",
      "integrity": "sha512-O84QOnr0icsbFGLS0O3bI5FswxzRr8/gHwWkDlQFskhSPryQXvrTMxjxGP4+iWYoauLoBvfDpkrOauZ+0iZpDA==",
      "license": "MIT",
      "dependencies": {
        "minimalistic-assert": "^1.0.0"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-encoding": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-encoding/-/whatwg-encoding-2.0.0.tgz",
      "integrity": "sha512-p41ogyeMUrw3jWclHWTQg1k05DSVXPLcVxRTYsXUk+ZooOCZLcoYgPZ/HL/D/N+uQPOtcp1me1WhBEaX02mhWg==",
      "license": "MIT",
      "dependencies": {
        "iconv-lite": "0.6.3"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-encoding/node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/whatwg-mimetype": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-mimetype/-/whatwg-mimetype-3.0.0.tgz",
      "integrity": "sha512-nt+N2dzIutVRxARx1nghPKGv1xHikU7HKdfafKkLNLindmPU/ch3U31NOCGGA/dmPcmb1VlofO0vnKAcsm0o/Q==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-url": {
      "version": "12.0.1",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-12.0.1.tgz",
      "integrity": "sha512-Ed/LrqB8EPlGxjS+TrsXcpUond1mhccS3pchLhzSgPCnTimUCKj3IZE75pAs5m6heB2U2TMerKFUXheyHY+VDQ==",
      "license": "MIT",
      "dependencies": {
        "tr46": "^4.1.1",
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "license": "ISC"
    },
    "node_modules/ws": {
      "version": "7.5.10",
      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.10.tgz",
      "integrity": "sha512-+dbF1tHwZpXcbOJdVOkzLDxZP1ailvSxM6ZweXTegylPny803bFhA+vqBYw4s31NSAk4S2Qz+AKXK9a4wkdjcQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8.3.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": "^5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xml-name-validator": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/xml-name-validator/-/xml-name-validator-4.0.0.tgz",
      "integrity": "sha512-ICP2e+jsHvAj2E2lIHxa5tjXRlKDJo4IdvPvCXbXQGdzSfmSpNVyIKMvoZHjDY9DP0zV17iI85o90vRFXNccRw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/xmlchars": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/xmlchars/-/xmlchars-2.2.0.tgz",
      "integrity": "sha512-JZnDKK8B0RCDw84FNdDAIpZK+JuJw+s7Lz8nksI7SIuU3UXJJslUthsi+uWBUYOwPFwW7W7PRLRfUKpxjtjFCw==",
      "license": "MIT"
    }
  }
}


static/arduino_blocks.js:
// static/arduino_blocks.js
Blockly.Blocks['text_print'] = {
    init: function() {
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.appendValueInput("TEXT")
            .setCheck(null)
            .appendField(new Blockly.FieldDropdown([["println", "PRINTLN"], ["print", "PRINT"]]), "MODE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Prints text to the serial monitor.");
        this.setHelpUrl("");
    }
};


Blockly.Blocks['arduino_setup'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Setup");
        this.appendStatementInput("SETUP")
            .setCheck(null);
        this.setColour(230);
        this.setTooltip("");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['serial_begin'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Serial.begin")
            .appendField(new Blockly.FieldDropdown([
                ["9600", "9600"], 
                ["19200", "19200"], 
                ["38400", "38400"], 
                ["57600", "57600"], 
                ["115200", "115200"]
            ]), "BAUD_RATE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Initialize the serial communication with the specified baud rate.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['analog_read'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("analogRead")
            .appendField(new Blockly.FieldDropdown([
                ["A0", "A0"], ["A1", "A1"], ["A2", "A2"], ["A3", "A3"], ["A4", "A4"], ["A5", "A5"]
            ]), "PIN");
        this.setOutput(true, "Number");
        this.setColour(160);
        this.setTooltip("Read the value from the specified analog pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['digital_read'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("digitalRead")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN");
        this.setOutput(true, "Boolean");
        this.setColour(160);
        this.setTooltip("Read the value from the specified digital pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['digital_write'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("digitalWrite")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN")
            .appendField(new Blockly.FieldDropdown([
                ["HIGH", "HIGH"], ["LOW", "LOW"]
            ]), "STATE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Write the specified value to the specified digital pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['pin_mode'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("pinMode")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN")
            .appendField(new Blockly.FieldDropdown([
                ["INPUT", "INPUT"], ["OUTPUT", "OUTPUT"], ["INPUT_PULLUP", "INPUT_PULLUP"]
            ]), "MODE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Set the mode of the specified pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['analog_write'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("analogWrite")
            .appendField(new Blockly.FieldDropdown([
                ["3", "3"], ["5", "5"], ["6", "6"], ["9", "9"], ["10", "10"], ["11", "11"]
            ]), "PIN")
            .appendField(new Blockly.FieldNumber(0, 0, 255), "VALUE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Write an analog value (PWM) to the specified pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['analog_reference'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("analogReference")
            .appendField(new Blockly.FieldDropdown([
                ["DEFAULT", "DEFAULT"], ["INTERNAL", "INTERNAL"], ["INTERNAL1V1", "INTERNAL1V1"], ["INTERNAL2V56", "INTERNAL2V56"], ["EXTERNAL", "EXTERNAL"]
            ]), "TYPE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Configures the reference voltage used for analog input.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['delay'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("delay")
            .appendField(new Blockly.FieldNumber(0), "TIME");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Pauses the program for the amount of time (in milliseconds) specified as parameter.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['delay_microseconds'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("delayMicroseconds")
            .appendField(new Blockly.FieldNumber(0), "TIME");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Pauses the program for the amount of time (in microseconds) specified as parameter.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['micros'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("micros");
        this.setOutput(true, "Number");
        this.setColour(160);
        this.setTooltip("Returns the number of microseconds since the Arduino board began running the current program.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['millis'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("millis");
        this.setOutput(true, "Number");
        this.setColour(160);
        this.setTooltip("Returns the number of milliseconds since the Arduino board began running the current program.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['no_tone'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("noTone")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Stops the generation of a square wave triggered by tone().");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['tone'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("tone")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN")
            .appendField(new Blockly.FieldNumber(0, 0), "FREQUENCY")
            .appendField("Hz")
            .appendField("for")
            .appendField(new Blockly.FieldNumber(0, 0), "DURATION")
            .appendField("ms");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Generates a square wave of the specified frequency (and 50% duty cycle) on a pin. Optionally, a duration can be specified.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['pulse_in'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("pulseIn")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN")
            .appendField(new Blockly.FieldDropdown([
                ["HIGH", "HIGH"], ["LOW", "LOW"]
            ]), "STATE");
        this.setOutput(true, "Number");
        this.setColour(160);
        this.setTooltip("Reads a pulse (either HIGH or LOW) on a pin.");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['pulse_in_long'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("pulseInLong")
            .appendField(new Blockly.FieldDropdown([
                ["2", "2"], ["3", "3"], ["4", "4"], ["5", "5"], ["6", "6"], ["7", "7"], ["8", "8"], ["9", "9"], ["10", "10"], ["11", "11"], ["12", "12"], ["13", "13"]
            ]), "PIN")
            .appendField(new Blockly.FieldDropdown([
                ["HIGH", "HIGH"], ["LOW", "LOW"]
            ]), "STATE");
        this.setOutput(true, "Number");
        this.setColour(160);
        this.setTooltip("Reads a pulse (either HIGH or LOW) on a pin. For long pulse widths.");
        this.setHelpUrl("");
    }
};


//END ARDUINO

Blockly.Blocks['arduino_loop'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Loop");
        this.appendStatementInput("LOOP")
            .setCheck(null);
        this.setColour(230);
        this.setTooltip("");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['arduino_digital_write'] = {
    init: function() {
        this.appendValueInput("PIN")
            .setCheck("Number")
            .appendField("Digital Write PIN#");
        this.appendValueInput("STATE")
            .setCheck("Boolean")
            .appendField("State");
        this.setInputsInline(true);
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(230);
        this.setTooltip("");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['arduino_digital_read'] = {
    init: function() {
        this.appendValueInput("PIN")
            .setCheck("Number")
            .appendField("Digital Read PIN#");
        this.setInputsInline(true);
        this.setOutput(true, "Boolean");
        this.setColour(230);
        this.setTooltip("");
        this.setHelpUrl("");
    }
};

Blockly.Blocks['math_number'] = {
  init: function() {
    this.appendDummyInput()
        .appendField(new Blockly.FieldNumber(0), "NUM");
    this.setOutput(true, "Number");
    this.setColour(230);
    this.setTooltip("");
    this.setHelpUrl("");
  }
};

//Math
//Declare
// Variable Declaration Blocks
Blockly.Blocks['variables_declare_number'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Declare number")
            .appendField(new Blockly.FieldTextInput("myVarNumber"), "VAR_NAME")
            .appendField(new Blockly.FieldDropdown([
                ["byte", "byte"],
                ["int", "int"],
                ["float", "float"],
                ["long", "long"],
                ["double", "double"]
            ]), "TYPE");
        this.appendValueInput("VALUE")
            .setCheck("Number")
            .appendField("value");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(330);
        this.setTooltip("Declare a number variable");
        this.setHelpUrl("");
    },
    onchange: function(event) {
        if (event.type === Blockly.Events.BLOCK_CREATE || 
            event.type === Blockly.Events.BLOCK_CHANGE || 
            event.type === Blockly.Events.BLOCK_MOVE) {
            const varName = this.getFieldValue('VAR_NAME');
            const varType = 'NUMBER';
            const workspace = this.workspace;
            let variable = workspace.getVariable(varName, varType);
            if (!variable) {
                workspace.createVariable(varName, varType);
            } else if (variable.type !== varType) {
                workspace.deleteVariableById(variable.getId());
                workspace.createVariable(varName, varType);
            }
        }
    }
};

Blockly.Blocks['variables_declare_text'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Declare text")
            .appendField(new Blockly.FieldTextInput("myVarText"), "VAR_NAME")
            .appendField(new Blockly.FieldDropdown([
                ["char", "char"],
                ["String", "String"]
            ]), "TYPE");
        this.appendValueInput("VALUE")
            .setCheck("String")
            .appendField("value");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(230);
        this.setTooltip("Declare a text variable");
        this.setHelpUrl("");
    },
    onchange: function(event) {
        if (event.type === Blockly.Events.BLOCK_CREATE || 
            event.type === Blockly.Events.BLOCK_CHANGE || 
            event.type === Blockly.Events.BLOCK_MOVE) {
            const varName = this.getFieldValue('VAR_NAME');
            const varType = 'TEXT';
            const workspace = this.workspace;
            let variable = workspace.getVariable(varName, varType);
            if (!variable) {
                workspace.createVariable(varName, varType);
            } else if (variable.type !== varType) {
                workspace.deleteVariableById(variable.getId());
                workspace.createVariable(varName, varType);
            }
        }
    }
};

Blockly.Blocks['variables_declare_boolean'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Declare boolean")
            .appendField(new Blockly.FieldTextInput("myVarBool"), "VAR_NAME")
            .appendField(new Blockly.FieldDropdown([
                ["true", "true"],
                ["false", "false"]
            ]), "TYPE");
        this.setPreviousStatement(true, null);
        this.setNextStatement(true, null);
        this.setColour(160);
        this.setTooltip("Declare a boolean variable");
        this.setHelpUrl("");
    },
    onchange: function(event) {
        if (event.type === Blockly.Events.BLOCK_CREATE || 
            event.type === Blockly.Events.BLOCK_CHANGE || 
            event.type === Blockly.Events.BLOCK_MOVE) {
            const varName = this.getFieldValue('VAR_NAME');
            const varType = 'BOOLEAN';
            const workspace = this.workspace;
            let variable = workspace.getVariable(varName, varType);
            if (!variable) {
                workspace.createVariable(varName, varType);
            } else if (variable.type !== varType) {
                workspace.deleteVariableById(variable.getId());
                workspace.createVariable(varName, varType);
            }
        }
    }
};

//Get
// Obtenção de Variáveis
// Get Number Variable
// Get Number Variable
Blockly.Blocks['variables_get_number'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Get number")
            .appendField(new Blockly.FieldVariable(
                "myVarText",
                null,
                ['NUMBER'],
                'NUMBER'
            ), "VAR");
        this.setOutput(true, "Number");
        this.setColour(330);
        this.setTooltip("Get the value of a number variable");
        this.setHelpUrl("");
    }
};

// Get Text Variable
Blockly.Blocks['variables_get_text'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Get text")
            .appendField(new Blockly.FieldVariable(
                "myVarText",
                null,
                ['TEXT'],
                'TEXT'
            ), "VAR");
        this.setOutput(true, "String");
        this.setColour(230);
        this.setTooltip("Get the value of a text variable");
        this.arguments_ = [];
        this.setHelpUrl("");
    },
};

// Get Boolean Variable
Blockly.Blocks['variables_get_boolean'] = {
    init: function() {
        this.appendDummyInput()
            .appendField("Get boolean")
            .appendField(new Blockly.FieldVariable(
                "myVarBool",
                null,
                ['BOOLEAN'],
                'BOOLEAN'
            ), "VAR");
        this.setOutput(true, "Boolean");
        this.setColour(160);
        this.setTooltip("Get the value of a boolean variable");
        this.setHelpUrl("");
    }
};
//END MATH

//Functions blocks
// Bloco para definir uma função com retorno
Blockly.Blocks['procedures_defreturn'] = {
  init: function() {
    this.appendDummyInput()
        .appendField("function")
        .appendField(new Blockly.FieldTextInput("do something"), "NAME");
    this.appendStatementInput("STACK")
        .setCheck(null)
        .appendField("do");
    this.appendValueInput("RETURN")
        .setCheck(null)
        .appendField("return");
    this.setInputsInline(false);
    this.setColour(290);
    this.setTooltip("");
    this.setHelpUrl("");
    this.arguments_ = [];
    this.setStyle('procedure_blocks');
  },
  getVars: function() {
    return this.arguments_;
  },
  getVarModels: function() {
    return this.arguments_.map(varName => this.workspace.getVariable(varName));
  }
};

// Bloco para definir uma função sem retorno
Blockly.Blocks['procedures_defnoreturn'] = {
  init: function() {
    this.appendDummyInput()
        .appendField("function")
        .appendField(new Blockly.FieldTextInput("do something"), "NAME");
    this.appendStatementInput("STACK")
        .setCheck(null)
        .appendField("do");
    this.setInputsInline(false);
    this.setColour(290);
    this.setTooltip("");
    this.setHelpUrl("");
    this.arguments_ = [];
    this.setStyle('procedure_blocks');
  },
  getVars: function() {
    return this.arguments_;
  },
  getVarModels: function() {
    return this.arguments_.map(varName => this.workspace.getVariable(varName));
  }
};

// Bloco para chamar uma função com retorno
Blockly.Blocks['procedures_callreturn'] = {
  init: function() {
    this.appendDummyInput()
        .appendField("call")
        .appendField(new Blockly.FieldTextInput("do something"), "NAME");
    this.setOutput(true, null);
    this.setColour(290);
    this.setTooltip("");
    this.setHelpUrl("");
    this.arguments_ = [];
    this.setStyle('procedure_blocks');
  },
  getVars: function() {
    return this.arguments_;
  },
  getVarModels: function() {
    return this.arguments_.map(varName => this.workspace.getVariable(varName));
  }
};

// Bloco para chamar uma função sem retorno
Blockly.Blocks['procedures_callnoreturn'] = {
  init: function() {
    this.appendDummyInput()
        .appendField("call")
        .appendField(new Blockly.FieldTextInput("do something"), "NAME");
    this.setPreviousStatement(true, null);
    this.setNextStatement(true, null);
    this.setColour(290);
    this.setTooltip("");
    this.setHelpUrl("");
    this.arguments_ = [];
    this.setStyle('procedure_blocks');
  },
  getVars: function() {
    return this.arguments_;
  },
  getVarModels: function() {
    return this.arguments_.map(varName => this.workspace.getVariable(varName));
  }
};

// Bloco para retornar condicionalmente
Blockly.Blocks['procedures_ifreturn'] = {
  init: function() {
    this.appendValueInput("CONDITION")
        .setCheck("Boolean")
        .appendField("if");
    this.appendDummyInput()
        .appendField("return");
    this.appendValueInput("VALUE")
        .setCheck(null);
    this.setInputsInline(true);
    this.setPreviousStatement(true, null);
    this.setNextStatement(true, null);
    this.setColour(290);
    this.setTooltip("");
    this.setHelpUrl("");
    this.arguments_ = [];
    this.setStyle('procedure_blocks');
  },
  getVars: function() {
    return this.arguments_;
  },
  getVarModels: function() {
    return this.arguments_.map(varName => this.workspace.getVariable(varName));
  }
};
//End functions

//Custom code
Blockly.Blocks['custom_code'] = {
  init: function() {
    this.appendDummyInput()
        .appendField("Custom Code")
        .appendField(new Blockly.FieldTextInput('#include "dht.h"'), 'CUSTOM_CODE');
    this.setPreviousStatement(true, null);
    this.setNextStatement(true, null);
    this.setColour(160);
    this.setTooltip("Adicione código customizado ao seu programa.");
    this.setHelpUrl("");
  }
};



static/arduino_generator.js:
// static/arduino_generator.js
Blockly.Arduino = new Blockly.Generator('Arduino');

Blockly.Arduino.ORDER_ATOMIC = 0;         // 0 "" ...
Blockly.Arduino.ORDER_UNARY_POSTFIX = 1;  // expr++ expr-- () [] .
Blockly.Arduino.ORDER_UNARY_PREFIX = 2;   // -expr !expr ~expr ++expr --expr
Blockly.Arduino.ORDER_MULTIPLICATIVE = 3; // * / % ~/
Blockly.Arduino.ORDER_ADDITIVE = 4;       // + -
Blockly.Arduino.ORDER_SHIFT = 5;          // << >>
Blockly.Arduino.ORDER_RELATIONAL = 6;     // is is! >= > <= 
Blockly.Arduino.ORDER_EQUALITY = 7;       // == != === !==
Blockly.Arduino.ORDER_BITWISE_AND = 8;    // &
Blockly.Arduino.ORDER_BITWISE_XOR = 9;    // ^
Blockly.Arduino.ORDER_BITWISE_OR = 10;    // |
Blockly.Arduino.ORDER_LOGICAL_AND = 11;   // &&
Blockly.Arduino.ORDER_LOGICAL_OR = 12;    // ||
Blockly.Arduino.ORDER_CONDITIONAL = 13;   // expr ? expr : expr
Blockly.Arduino.ORDER_ASSIGNMENT = 14;    // = += -= *= /= ~/= %= <<= >>= &= ^= |=
Blockly.Arduino.ORDER_YIELD = 15;         // yield
Blockly.Arduino.ORDER_COMMA = 16;         // ,
Blockly.Arduino.ORDER_NONE = 99;          // (...)

Blockly.Arduino.reset = function() {
    Blockly.Arduino.definitions_ = Object.create(null);
    Blockly.Arduino.setups_ = Object.create(null);
    Blockly.Arduino.loop_ = Object.create(null);
};

Blockly.Arduino.init = function(workspace) {
  Blockly.Arduino.nameDB_ = new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);
  Blockly.Arduino.nameDB_.setVariableMap(workspace.getVariableMap());
  Blockly.Arduino.reset();

  // Create a dictionary of definitions to be printed before setups.
  Blockly.Arduino.definitions_ = Object.create(null);
  // Create a dictionary of setups to be printed before the code.
  Blockly.Arduino.setups_ = Object.create(null);
  // Create a dictionary of variable definitions to be printed after setups.
  Blockly.Arduino.variables_ = Object.create(null);
  // Create a dictionary of functions from the code.
  Blockly.Arduino.functions_ = Object.create(null);
  // Create a dictionary of functions from the header.
  Blockly.Arduino.headerFunctions_ = Object.create(null);
  // Create a dictionary of functions from the user.
  Blockly.Arduino.userFunctions_ = Object.create(null);
  
};

Blockly.Arduino.finish = function(code) {
  // Convert the setups dictionary into a list.
  const setups = [];
  for (const name in Blockly.Arduino.setups_) {
    setups.push(Blockly.Arduino.setups_[name]);
  }
  // Convert the variable definitions dictionary into a list.
  const variables = [];
  for (const name in Blockly.Arduino.variables_) {
    variables.push(Blockly.Arduino.variables_[name]);
  }
  // Convert the functions dictionary into a list.
  const functions = [];
  for (const name in Blockly.Arduino.functions_) {
    functions.push(Blockly.Arduino.functions_[name]);
  }

  // Clean up temporary data.
  delete Blockly.Arduino.definitions_;
  delete Blockly.Arduino.setups_;
  delete Blockly.Arduino.variables_;
  delete Blockly.Arduino.functions_;
  Blockly.Arduino.reset();

  return setups.join('\n') + '\n' + variables.join('\n') + '\n' + functions.join('\n') + '\n\n' + code;
};

Blockly.Arduino.scrub_ = function(block, code) {
  const nextBlock = block.nextConnection && block.nextConnection.targetBlock();
  const nextCode = Blockly.Arduino.blockToCode(nextBlock);
  return code + nextCode;
};

Blockly.Arduino.blockToCode = function(block) {
  if (!block) {
    return '';
  }

  if (block.isEnabled() && !block.hasDisabledReason()) {
    var func = this[block.type];
    if (typeof func !== 'function') {
      throw Error('Language "Arduino" does not know how to generate code for block type "' + block.type + '".');
    }
    var code = func.call(this, block);

    if (Array.isArray(code)) {
      return code[0] + this.scrub_(block, code[1]);
    } else {
      return this.scrub_(block, code);
    }
  } else {
    return this.scrub_(block, '');
  }
};


Blockly.Arduino.workspaceToCode = function(workspace) {
  if (!workspace) {
    console.warn('Blockly.Arduino.workspaceToCode was called with an invalid workspace.');
    return '';
  }
  let code = [];
  this.init(workspace);
  const blocks = workspace.getTopBlocks(true);
  for (let i = 0, block; block = blocks[i]; i++) {
    let line = this.blockToCode(block);
    if (line) {
      if (Array.isArray(line)) {
        line = line[0];
      }
      code.push(line);
    }
  }
  code = code.join('\n');
  code = this.finish(code);
  return code;
};

Blockly.Arduino.prefixLines = function(text, prefix) {
    return prefix + text.replace(/\n/g, '\n' + prefix);
};

//Arduino
Blockly.Arduino['arduino_setup'] = function(block) {
    var statements_setup = Blockly.Arduino.statementToCode(block, 'SETUP');
    statements_setup = Blockly.Arduino.addLoopTrap(statements_setup, block.id) || '';
    statements_setup = Blockly.Arduino.prefixLines(statements_setup, '  ');  // Add indentation
    var code = 'void setup() {\n' + statements_setup + '\n}\n';
    
    // Adiciona o código dos blocos conectados
    var nextBlock = block.nextConnection && block.nextConnection.targetBlock();
    if (nextBlock) {
        code += Blockly.Arduino.blockToCode(nextBlock);
    }

    return code;
};

Blockly.Arduino['arduino_loop'] = function(block) {
    var statements_loop = Blockly.Arduino.statementToCode(block, 'LOOP');
    statements_loop = Blockly.Arduino.addLoopTrap(statements_loop, block.id) || '';
    statements_loop = Blockly.Arduino.prefixLines(statements_loop, '  ');  // Add indentation
    var code = 'void loop() {\n' + statements_loop + '\n}\n';
    
    // Adiciona o código dos blocos conectados
    var nextBlock = block.nextConnection && block.nextConnection.targetBlock();
    if (nextBlock) {
        code += Blockly.Arduino.blockToCode(nextBlock);
    }

    return code;
};

Blockly.Arduino['serial_begin'] = function(block) {
    var baudRate = block.getFieldValue('BAUD_RATE');
    var code = 'Serial.begin(' + baudRate + ');\n';
    return code;
};

Blockly.Arduino['analog_read'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var code = 'analogRead(' + pin + ');\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['digital_read'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var code = 'digitalRead(' + pin + ');\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['digital_write'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var state = block.getFieldValue('STATE');
    var code = 'digitalWrite(' + pin + ', ' + state + ');\n';
    return code;
};

Blockly.Arduino['pin_mode'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var mode = block.getFieldValue('MODE');
    var code = 'pinMode(' + pin + ', ' + mode + ');\n';
    return code;
};

Blockly.Arduino['analog_write'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var value = block.getFieldValue('VALUE');
    var code = 'analogWrite(' + pin + ', ' + value + ');\n';
    return code;
};

Blockly.Arduino['analog_reference'] = function(block) {
    var type = block.getFieldValue('TYPE');
    var code = 'analogReference(' + type + ');\n';
    return code;
};

Blockly.Arduino['delay'] = function(block) {
    var time = block.getFieldValue('TIME');
    var code = 'delay(' + time + ');\n';
    return code;
};

Blockly.Arduino['delay_microseconds'] = function(block) {
    var time = block.getFieldValue('TIME');
    var code = 'delayMicroseconds(' + time + ');\n';
    return code;
};

Blockly.Arduino['micros'] = function(block) {
    var code = 'micros();\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['millis'] = function(block) {
    var code = 'millis();\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['no_tone'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var code = 'noTone(' + pin + ');\n';
    return code;
};

Blockly.Arduino['tone'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var frequency = block.getFieldValue('FREQUENCY');
    var duration = block.getFieldValue('DURATION');
    var code = 'tone(' + pin + ', ' + frequency + ', ' + duration + ');\n';
    return code;
};

Blockly.Arduino['pulse_in'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var state = block.getFieldValue('STATE');
    var code = 'pulseIn(' + pin + ', ' + state + ');\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['pulse_in_long'] = function(block) {
    var pin = block.getFieldValue('PIN');
    var state = block.getFieldValue('STATE');
    var code = 'pulseInLong(' + pin + ', ' + state + ');\n';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

//END ARDUINO



/*
  NATIVES BLOCKS
*/

Blockly.Arduino['controls_if'] = function (block) {
    var n = 0;
    var code = '', branchCode, conditionCode;
    do {
        conditionCode = Blockly.Arduino.valueToCode(block, 'IF' + n, Blockly.Arduino.ORDER_NONE) || 'false';
        branchCode = Blockly.Arduino.statementToCode(block, 'DO' + n);
        code += (n > 0 ? ' else ' : '') + 'if (' + conditionCode + ') {\n' + branchCode + '}';
        n++;
    } while (block.getInput('IF' + n));

    if (block.getInput('ELSE')) {
        branchCode = Blockly.Arduino.statementToCode(block, 'ELSE');
        code += ' else {\n' + branchCode + '}';
    }

    return code + '\n';
};

Blockly.Arduino['logic_compare'] = function (block) {
    var OPERATORS = {
        'EQ': '==',
        'NEQ': '!=',
        'LT': '<',
        'LTE': '<=',
        'GT': '>',
        'GTE': '>='
    };
    var operator = OPERATORS[block.getFieldValue('OP')];
    var order = Blockly.Arduino.ORDER_RELATIONAL;
    var argument0 = Blockly.Arduino.valueToCode(block, 'A', order) || '0';
    var argument1 = Blockly.Arduino.valueToCode(block, 'B', order) || '0';
    var code = argument0 + ' ' + operator + ' ' + argument1;
    return [code, order];
};

Blockly.Arduino['logic_operation'] = function (block) {
    var operator = (block.getFieldValue('OP') === 'AND') ? '&&' : '||';
    var order = (operator === '&&') ? Blockly.Arduino.ORDER_LOGICAL_AND : Blockly.Arduino.ORDER_LOGICAL_OR;
    var argument0 = Blockly.Arduino.valueToCode(block, 'A', order) || 'false';
    var argument1 = Blockly.Arduino.valueToCode(block, 'B', order) || 'false';
    var code = argument0 + ' ' + operator + ' ' + argument1;
    return [code, order];
};

Blockly.Arduino['logic_negate'] = function (block) {
    var order = Blockly.Arduino.ORDER_LOGICAL_NOT;
    var argument0 = Blockly.Arduino.valueToCode(block, 'BOOL', order) || 'false';
    var code = '!' + argument0;
    return [code, order];
};

Blockly.Arduino['logic_boolean'] = function (block) {
    var code = (block.getFieldValue('BOOL') === 'TRUE') ? 'true' : 'false';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['logic_null'] = function (block) {
    return ['NULL', Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['logic_ternary'] = function (block) {
    var value_if = Blockly.Arduino.valueToCode(block, 'IF', Blockly.Arduino.ORDER_CONDITIONAL) || 'false';
    var value_then = Blockly.Arduino.valueToCode(block, 'THEN', Blockly.Arduino.ORDER_CONDITIONAL) || 'null';
    var value_else = Blockly.Arduino.valueToCode(block, 'ELSE', Blockly.Arduino.ORDER_CONDITIONAL) || 'null';
    var code = value_if + ' ? ' + value_then + ' : ' + value_else;
    return [code, Blockly.Arduino.ORDER_CONDITIONAL];
};

Blockly.Arduino['controls_repeat_ext'] = function (block) {
    var repeats = Blockly.Arduino.valueToCode(block, 'TIMES', Blockly.Arduino.ORDER_ATOMIC) || '0';
    var branch = Blockly.Arduino.statementToCode(block, 'DO');
    var code = 'for (int count = 0; count < ' + repeats + '; count++) {\n' + branch + '}\n';
    return code;
};

Blockly.Arduino['controls_whileUntil'] = function (block) {
    var until = block.getFieldValue('MODE') === 'UNTIL';
    var argument0 = Blockly.Arduino.valueToCode(block, 'BOOL', until ? Blockly.Arduino.ORDER_LOGICAL_NOT : Blockly.Arduino.ORDER_NONE) || 'false';
    var branch = Blockly.Arduino.statementToCode(block, 'DO');
    if (until) {
        argument0 = '!' + argument0;
    }
    return 'while (' + argument0 + ') {\n' + branch + '}\n';
};

Blockly.Arduino['controls_for'] = function (block) {
    var variable0 = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);
    var argument0 = Blockly.Arduino.valueToCode(block, 'FROM', Blockly.Arduino.ORDER_ASSIGNMENT) || '0';
    var argument1 = Blockly.Arduino.valueToCode(block, 'TO', Blockly.Arduino.ORDER_ASSIGNMENT) || '0';
    var increment = Blockly.Arduino.valueToCode(block, 'BY', Blockly.Arduino.ORDER_ASSIGNMENT) || '1';
    var branch = Blockly.Arduino.statementToCode(block, 'DO');
    var code = 'for (int ' + variable0 + ' = ' + argument0 + '; ' + variable0 + ' <= ' + argument1 + '; ' + variable0;
    code += ' += ' + increment + ') {\n' + branch + '}\n';
    return code;
};

Blockly.Arduino['controls_forEach'] = function (block) {
    var variable0 = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);
    var argument0 = Blockly.Arduino.valueToCode(block, 'LIST', Blockly.Arduino.ORDER_ATOMIC) || '[]';
    var branch = Blockly.Arduino.statementToCode(block, 'DO');
    var code = 'for (int ' + variable0 + ' : ' + argument0 + ') {\n' + branch + '}\n';
    return code;
};

Blockly.Arduino['controls_flow_statements'] = function (block) {
    var xfix = '';
    if (Blockly.Arduino.STATEMENT_PREFIX) {
        xfix += Blockly.Arduino.injectId(Blockly.Arduino.STATEMENT_PREFIX, block);
    }
    if (Blockly.Arduino.STATEMENT_SUFFIX) {
        xfix += Blockly.Arduino.injectId(Blockly.Arduino.STATEMENT_SUFFIX, block);
    }
    if (Blockly.Arduino.STATEMENT_PREFIX) {
        var loop = Blockly.Arduino.nameDB_.getName(block.getFieldValue('LOOP'), Blockly.PROCEDURE_CATEGORY_NAME);
        var code = loop ? 'continue;\n' : 'break;\n';
    } else {
        var code = block.getFieldValue('FLOW') === 'BREAK' ? 'break;\n' : 'continue;\n';
    }
    return xfix + code;
};

// MATH
Blockly.Arduino['math_arithmetic'] = function(block) {
  // Basic arithmetic operators, and power.
  var OPERATORS = {
    'ADD': [' + ', Blockly.Arduino.ORDER_ADDITIVE],
    'MINUS': [' - ', Blockly.Arduino.ORDER_ADDITIVE],
    'MULTIPLY': [' * ', Blockly.Arduino.ORDER_MULTIPLICATIVE],
    'DIVIDE': [' / ', Blockly.Arduino.ORDER_MULTIPLICATIVE],
    'POWER': [null, Blockly.Arduino.ORDER_NONE]  // Handle power separately.
  };
  var tuple = OPERATORS[block.getFieldValue('OP')];
  var operator = tuple[0];
  var order = tuple[1];
  var argument0 = Blockly.Arduino.valueToCode(block, 'A', order) || '0';
  var argument1 = Blockly.Arduino.valueToCode(block, 'B', order) || '0';
  var code;
  // Power in Arduino requires a special case since it has no operator.
  if (!operator) {
    code = 'pow(' + argument0 + ', ' + argument1 + ')';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
  }
  code = argument0 + operator + argument1;
  return [code, order];
};

Blockly.Arduino['math_single'] = function (block) {
    var operator = block.getFieldValue('OP');
    var code;
    var arg;
    if (operator === 'NEG') {
        arg = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_UNARY_NEGATION) || '0';
        code = '-' + arg;
        return [code, Blockly.Arduino.ORDER_UNARY_NEGATION];
    }
    arg = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_NONE) || '0';
    switch (operator) {
        case 'ROOT':
            code = 'sqrt(' + arg + ')';
            break;
        case 'ABS':
            code = 'abs(' + arg + ')';
            break;
        case 'LN':
            code = 'log(' + arg + ')';
            break;
        case 'EXP':
            code = 'exp(' + arg + ')';
            break;
        case 'POW10':
            code = 'pow(10, ' + arg + ')';
            break;
        default:
            throw Error('Unknown math operator: ' + operator);
    }
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_trig'] = function (block) {
    var operator = block.getFieldValue('OP');
    var code;
    var arg;
    if (operator === 'NEG') {
        arg = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_UNARY_NEGATION) || '0';
        code = '-' + arg;
        return [code, Blockly.Arduino.ORDER_UNARY_NEGATION];
    }
    arg = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_NONE) || '0';
    switch (operator) {
        case 'SIN':
            code = 'sin(' + arg + ')';
            break;
        case 'COS':
            code = 'cos(' + arg + ')';
            break;
        case 'TAN':
            code = 'tan(' + arg + ')';
            break;
        case 'ASIN':
            code = 'asin(' + arg + ')';
            break;
        case 'ACOS':
            code = 'acos(' + arg + ')';
            break;
        case 'ATAN':
            code = 'atan(' + arg + ')';
            break;
        default:
            throw Error('Unknown math operator: ' + operator);
    }
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_constant'] = function (block) {
    var CONSTANTS = {
        'PI': ['PI', Blockly.Arduino.ORDER_ATOMIC],
        'E': ['M_E', Blockly.Arduino.ORDER_ATOMIC],
        'GOLDEN_RATIO': ['1.61803398875', Blockly.Arduino.ORDER_ATOMIC],
        'SQRT2': ['M_SQRT2', Blockly.Arduino.ORDER_ATOMIC],
        'SQRT1_2': ['M_SQRT1_2', Blockly.Arduino.ORDER_ATOMIC]
    };
    return CONSTANTS[block.getFieldValue('CONSTANT')];
};

Blockly.Arduino['math_number_property'] = function (block) {
    var number_to_check = Blockly.Arduino.valueToCode(block, 'NUMBER_TO_CHECK', Blockly.Arduino.ORDER_MODULUS) || '0';
    var dropdown_property = block.getFieldValue('PROPERTY');
    var code;
    if (dropdown_property === 'PRIME') {
        code = 'isPrime(' + number_to_check + ')';
    } else if (dropdown_property === 'EVEN') {
        code = number_to_check + ' % 2 == 0';
    } else if (dropdown_property === 'ODD') {
        code = number_to_check + ' % 2 == 1';
    } else if (dropdown_property === 'WHOLE') {
        code = number_to_check + ' % 1 == 0';
    } else if (dropdown_property === 'POSITIVE') {
        code = number_to_check + ' > 0';
    } else if (dropdown_property === 'NEGATIVE') {
        code = number_to_check + ' < 0';
    } else if (dropdown_property === 'DIVISIBLE_BY') {
        var divisor = Blockly.Arduino.valueToCode(block, 'DIVISOR', Blockly.Arduino.ORDER_MODULUS) || '0';
        code = number_to_check + ' % ' + divisor + ' == 0';
    }
    return [code, Blockly.Arduino.ORDER_LOGICAL_NOT];
};

Blockly.Arduino['math_round'] = function (block) {
    var operator = block.getFieldValue('OP');
    var arg = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_NONE) || '0';
    var code;
    if (operator === 'ROUND') {
        code = 'round(' + arg + ')';
    } else if (operator === 'ROUNDUP') {
        code = 'ceil(' + arg + ')';
    } else if (operator === 'ROUNDDOWN') {
        code = 'floor(' + arg + ')';
    } else {
        throw Error('Unknown math operator: ' + operator);
    }
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_on_list'] = function (block) {
    var func = block.getFieldValue('OP');
    var list = Blockly.Arduino.valueToCode(block, 'LIST', Blockly.Arduino.ORDER_NONE) || '[]';
    var code;
    switch (func) {
        case 'SUM':
            code = list + '.reduce((x, y) => x + y, 0)';
            break;
        case 'MIN':
            code = 'Math.min.apply(null, ' + list + ')';
            break;
        case 'MAX':
            code = 'Math.max.apply(null, ' + list + ')';
            break;
        case 'AVERAGE':
            code = list + '.reduce((x, y) => x + y, 0) / ' + list + '.length';
            break;
        case 'MEDIAN':
            code = 'median(' + list + ')';
            break;
        case 'MODE':
            code = 'mode(' + list + ')';
            break;
        case 'STD_DEV':
            code = 'stdDev(' + list + ')';
            break;
        case 'RANDOM':
            code = list + '[Math.floor(Math.random() * ' + list + '.length)]';
            break;
        default:
            throw Error('Unknown operator: ' + func);
    }
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_modulo'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'DIVIDEND', Blockly.Arduino.ORDER_MODULUS) || '0';
    var argument1 = Blockly.Arduino.valueToCode(block, 'DIVISOR', Blockly.Arduino.ORDER_MODULUS) || '0';
    var code = argument0 + ' % ' + argument1;
    return [code, Blockly.Arduino.ORDER_MODULUS];
};

Blockly.Arduino['math_constrain'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_NONE) || '0';
    var argument1 = Blockly.Arduino.valueToCode(block, 'LOW', Blockly.Arduino.ORDER_NONE) || '0';
    var argument2 = Blockly.Arduino.valueToCode(block, 'HIGH', Blockly.Arduino.ORDER_NONE) || '0';
    var code = 'constrain(' + argument0 + ', ' + argument1 + ', ' + argument2 + ')';
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_random_int'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'FROM', Blockly.Arduino.ORDER_NONE) || '0';
    var argument1 = Blockly.Arduino.valueToCode(block, 'TO', Blockly.Arduino.ORDER_NONE) || '0';
    var code = 'random(' + argument0 + ', ' + argument1 + ')';
    return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['math_random_float'] = function (block) {
    return ['random(0.0, 1.0)', Blockly.Arduino.ORDER_FUNCTION_CALL];
};

//END MATH

//TEXT
Blockly.Arduino.quote_ = function(string) {
    string = string.replace(/\\/g, '\\\\')
                   .replace(/\n/g, '\\\n')
                   .replace(/'/g, '\\\'');
    return '"' + string + '"';
};

Blockly.Arduino['text'] = function (block) {
    const code = Blockly.Arduino.quote_(block.getFieldValue('TEXT'));
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['text_join'] = function (block) {
    var code;
    if (block.itemCount_ === 0) {
        return ['\'\'', Blockly.Arduino.ORDER_ATOMIC];
    } else if (block.itemCount_ === 1) {
        var argument0 = Blockly.Arduino.valueToCode(block, 'ADD0', Blockly.Arduino.ORDER_NONE) || '\'\'';
        code = 'String(' + argument0 + ')';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else {
        var argument0 = Blockly.Arduino.valueToCode(block, 'ADD0', Blockly.Arduino.ORDER_NONE) || '\'\'';
        var argument1 = Blockly.Arduino.valueToCode(block, 'ADD1', Blockly.Arduino.ORDER_NONE) || '\'\'';
        code = 'String(' + argument0 + ') + String(' + argument1 + ')';
        for (var n = 2; n < block.itemCount_; n++) {
            argument1 = Blockly.Arduino.valueToCode(block, 'ADD' + n, Blockly.Arduino.ORDER_NONE) || '\'\'';
            code = code + ' + String(' + argument1 + ')';
        }
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    }
};

Blockly.Arduino['text_append'] = function (block) {
    var varName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.VARIABLE_CATEGORY_NAME);
    var argument0 = Blockly.Arduino.valueToCode(block, 'TEXT', Blockly.Arduino.ORDER_NONE) || '\'\'';
    return varName + ' += ' + argument0 + ';\n';
};

Blockly.Arduino['text_length'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    return [argument0 + '.length()', Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_isEmpty'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    return [argument0 + '.isEmpty()', Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_indexOf'] = function (block) {
    var operator = block.getFieldValue('END') === 'FIRST' ? 'indexOf' : 'lastIndexOf';
    var argument0 = Blockly.Arduino.valueToCode(block, 'FIND', Blockly.Arduino.ORDER_NONE) || '\'\'';
    var argument1 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    var code = argument1 + '.' + operator + '(' + argument0 + ')';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_charAt'] = function (block) {
    var where = block.getFieldValue('WHERE') || 'FROM_START';
    var textOrder = (where === 'RANDOM') ? Blockly.Arduino.ORDER_NONE : Blockly.Arduino.ORDER_UNARY_POSTFIX;
    var text = Blockly.Arduino.valueToCode(block, 'VALUE', textOrder) || '\'\'';
    var code;
    if (where === 'FIRST') {
        code = text + '.charAt(0)';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (where === 'LAST') {
        code = text + '.charAt(' + text + '.length() - 1)';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (where === 'FROM_START') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT');
        code = text + '.charAt(' + at + ')';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (where === 'FROM_END') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT', 1, true);
        code = text + '.charAt(' + text + '.length() - ' + at + ')';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (where === 'RANDOM') {
        var functionName = Blockly.Arduino.provideFunction_(
            'textRandomLetter',
            ['String ' + Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_ + '(String text) {',
                '  int x = random(text.length());',
                '  return text.charAt(x);',
                '}']);
        code = functionName + '(' + text + ')';
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    }
    throw Error('Unhandled option (text_charAt).');
};

Blockly.Arduino['text_getSubstring'] = function (block) {
    var text = Blockly.Arduino.valueToCode(block, 'STRING', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    var where1 = block.getFieldValue('WHERE1');
    var where2 = block.getFieldValue('WHERE2');
    var at1 = Blockly.Arduino.valueToCode(block, 'AT1', Blockly.Arduino.ORDER_NONE) || '1';
    var at2 = Blockly.Arduino.valueToCode(block, 'AT2', Blockly.Arduino.ORDER_NONE) || '1';
    var code;
    if (where1 === 'FROM_END') {
        at1 = text + '.length() - ' + at1;
    } else if (where1 === 'FIRST') {
        at1 = '0';
    }
    if (where2 === 'FROM_END') {
        at2 = text + '.length() - ' + at2 + ' + 1';
    } else if (where2 === 'LAST') {
        at2 = text + '.length()';
    }
    code = text + '.substring(' + at1 + ', ' + at2 + ')';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_changeCase'] = function (block) {
    var operator = block.getFieldValue('CASE');
    var argument0 = Blockly.Arduino.valueToCode(block, 'TEXT', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    var code;
    if (operator === 'UPPERCASE') {
        code = argument0 + '.toUpperCase()';
    } else if (operator === 'LOWERCASE') {
        code = argument0 + '.toLowerCase()';
    } else if (operator === 'TITLECASE') {
        var functionName = Blockly.Arduino.provideFunction_(
            'textToTitleCase',
            ['String ' + Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_ + '(String str) {',
                '  return str.toLowerCase().replace(/\\b\\w/g, function (m) {return m.toUpperCase();});',
                '}']);
        code = functionName + '(' + argument0 + ')';
    }
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_trim'] = function (block) {
    var OPERATORS = {
        'LEFT': '.trimStart()',
        'RIGHT': '.trimEnd()',
        'BOTH': '.trim()'
    };
    var operator = OPERATORS[block.getFieldValue('MODE')];
    var argument0 = Blockly.Arduino.valueToCode(block, 'TEXT', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    return [argument0 + operator, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['text_print'] = function(block) {
    var mode = block.getFieldValue('MODE');
    var argument0 = Blockly.Arduino.valueToCode(block, 'TEXT', Blockly.Arduino.ORDER_NONE) || '""';

    // Verificar se o value é um array e pegar o primeiro elemento
    if (Array.isArray(argument0)) {
        argument0 = argument0[0];
    }

    // Remover os parênteses externos e as aspas
    argument0 = cleanAndStoreText(argument0, 1, -1);

    if (mode === 'PRINTLN') {
        return 'Serial.println(' + argument0 + ');\n';
    } else {
        return 'Serial.print(' + argument0 + ');\n';
    }
};

Blockly.Arduino['text_prompt_ext'] = function (block) {
    var msg = Blockly.Arduino.quote_(block.getFieldValue('TEXT'));
    var code = 'Serial.println(' + msg + ');\n';
    return code;
};
//END TEXT

Blockly.Arduino['lists_create_with'] = function (block) {
    var code = new Array(block.itemCount_);
    for (var n = 0; n < block.itemCount_; n++) {
        code[n] = Blockly.Arduino.valueToCode(block, 'ADD' + n, Blockly.Arduino.ORDER_NONE) || 'null';
    }
    code = '[' + code.join(', ') + ']';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['lists_repeat'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'ITEM', Blockly.Arduino.ORDER_NONE) || 'null';
    var argument1 = Blockly.Arduino.valueToCode(block, 'NUM', Blockly.Arduino.ORDER_NONE) || '0';
    var code = 'Array(' + argument1 + ').fill(' + argument0 + ')';
    return [code, Blockly.Arduino.ORDER_ATOMIC];
};

Blockly.Arduino['lists_length'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '[]';
    return [argument0 + '.length', Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['lists_isEmpty'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '[]';
    return ['!' + argument0 + '.length', Blockly.Arduino.ORDER_LOGICAL_NOT];
};

Blockly.Arduino['lists_indexOf'] = function (block) {
    var argument0 = Blockly.Arduino.valueToCode(block, 'FIND', Blockly.Arduino.ORDER_NONE) || '\'\'';
    var argument1 = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '[]';
    var code = argument1 + '.indexOf(' + argument0 + ')';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['lists_getIndex'] = function (block) {
    var mode = block.getFieldValue('MODE') || 'GET';
    var where = block.getFieldValue('WHERE') || 'FROM_START';
    var listOrder = (where === 'RANDOM') ? Blockly.Arduino.ORDER_NONE : Blockly.Arduino.ORDER_UNARY_POSTFIX;
    var list = Blockly.Arduino.valueToCode(block, 'VALUE', listOrder) || '[]';
    var code;
    if (where === 'FIRST') {
        code = list + '[0]';
    } else if (where === 'LAST') {
        code = list + '[' + list + '.length - 1]';
    } else if (where === 'FROM_START') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT');
        code = list + '[' + at + ']';
    } else if (where === 'FROM_END') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT', 1, true);
        code = list + '[' + list + '.length - ' + at + ']';
    } else if (where === 'RANDOM') {
        var functionName = Blockly.Arduino.provideFunction_(
            'listsGetRandomItem',
            ['function ' + Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_ + '(list, remove) {',
                '  var x = Math.floor(Math.random() * list.length);',
                '  if (remove) {',
                '    return list.splice(x, 1)[0];',
                '  } else {',
                '    return list[x];',
                '  }',
                '}']);
        code = functionName + '(' + list + ', ' + (mode !== 'GET') + ')';
    }
    if (mode === 'GET') {
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (mode === 'GET_REMOVE') {
        return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
    } else if (mode === 'REMOVE') {
        return code + ';\n';
    }
    throw Error('Unhandled combination (lists_getIndex).');
};

Blockly.Arduino['lists_setIndex'] = function (block) {
    var list = Blockly.Arduino.valueToCode(block, 'LIST', Blockly.Arduino.ORDER_ASSIGNMENT) || '[]';
    var mode = block.getFieldValue('MODE') || 'SET';
    var where = block.getFieldValue('WHERE') || 'FROM_START';
    var value = Blockly.Arduino.valueToCode(block, 'TO', Blockly.Arduino.ORDER_ASSIGNMENT) || 'null';
    var code;
    if (where === 'FIRST') {
        code = list + '[0]';
    } else if (where === 'LAST') {
        code = list + '[' + list + '.length - 1]';
    } else if (where === 'FROM_START') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT');
        code = list + '[' + at + ']';
    } else if (where === 'FROM_END') {
        var at = Blockly.Arduino.getAdjusted(block, 'AT', 1, true);
        code = list + '[' + list + '.length - ' + at + ']';
    } else if (where === 'RANDOM') {
        var functionName = Blockly.Arduino.provideFunction_(
            'listsGetRandomItem',
            ['function ' + Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_ + '(list) {',
                '  var x = Math.floor(Math.random() * list.length);',
                '  return x;',
                '}']);
        code = functionName + '(' + list + ')';
    }
    if (mode === 'SET') {
        return list + '[' + code + '] = ' + value + ';\n';
    } else if (mode === 'INSERT') {
        return list + '.splice(' + code + ', 0, ' + value + ');\n';
    }
    throw Error('Unhandled combination (lists_setIndex).');
};

Blockly.Arduino['lists_getSublist'] = function (block) {
    var list = Blockly.Arduino.valueToCode(block, 'LIST', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '[]';
    var where1 = block.getFieldValue('WHERE1');
    var where2 = block.getFieldValue('WHERE2');
    var at1 = Blockly.Arduino.valueToCode(block, 'AT1', Blockly.Arduino.ORDER_NONE) || '1';
    var at2 = Blockly.Arduino.valueToCode(block, 'AT2', Blockly.Arduino.ORDER_NONE) || '1';
    var code;
    if (where1 === 'FROM_END') {
        at1 = list + '.length - ' + at1;
    } else if (where1 === 'FIRST') {
        at1 = '0';
    }
    if (where2 === 'FROM_END') {
        at2 = list + '.length - ' + at2 + ' + 1';
    } else if (where2 === 'LAST') {
        at2 = list + '.length';
    }
    code = list + '.slice(' + at1 + ', ' + at2 + ')';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['lists_split'] = function (block) {
    var input = Blockly.Arduino.valueToCode(block, 'INPUT', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '\'\'';
    var delimiter = Blockly.Arduino.valueToCode(block, 'DELIM', Blockly.Arduino.ORDER_NONE) || '\'\'';
    var mode = block.getFieldValue('MODE');
    if (mode === 'SPLIT') {
        var code = input + '.split(' + delimiter + ')';
    } else if (mode === 'JOIN') {
        var code = input + '.join(' + delimiter + ')';
    }
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['lists_sort'] = function (block) {
    var list = Blockly.Arduino.valueToCode(block, 'LIST', Blockly.Arduino.ORDER_UNARY_POSTFIX) || '[]';
    var direction = block.getFieldValue('DIRECTION') === '1' ? '1' : '-1';
    var type = block.getFieldValue('TYPE');
    var getCompareFunctionName = Blockly.Arduino.provideFunction_(
        'listsGetSortCompare',
        ['function ' + Blockly.Arduino.FUNCTION_NAME_PLACEHOLDER_ + '(type, direction) {',
            '  var compare = function (a, b) {',
            '    if (a < b) return -1 * direction;',
            '    if (a > b) return 1 * direction;',
            '    return 0;',
            '  };',
            '  return compare;',
            '}']);
    var code = list + '.slice().sort(' + getCompareFunctionName + '("' + type + '", ' + direction + '))';
    return [code, Blockly.Arduino.ORDER_UNARY_POSTFIX];
};

Blockly.Arduino['math_number'] = function(block) {
  const code = String(block.getFieldValue('NUM'));
  return [code, Blockly.Arduino.ORDER_ATOMIC]
};

Blockly.FieldVariable.prototype.getVariableList = function(opt_type) {
    var variableModelList = this.workspace.getVariablesOfType(opt_type || '');
    variableModelList.sort((a, b) => a.name.localeCompare(b.name, undefined, { sensitivity: 'base' }));
    var variableNames = variableModelList.map(variable => [variable.name, variable.getId()]);
    return variableNames;
};

// Geradores de Variáveis
Blockly.Arduino['variables_declare_number'] = function(block) {
    var varName = block.getFieldValue('VAR_NAME');
    var type = block.getFieldValue('TYPE');
    var value = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_ATOMIC) || '0';

    if (typeof value[0] === 'string') {
        value = value[0].replace(/[()]/g, '');
    }

    var code = type + ' ' + varName + ' = ' + value + ';\n';
    Blockly.Arduino.definitions_['var_' + varName] = code;
    return code;
};

Blockly.Arduino['variables_declare_text'] = function(block) {
    var varName = block.getFieldValue('VAR_NAME');
    var type = block.getFieldValue('TYPE');
    var value = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_ATOMIC) || '""';

    if (Array.isArray(value)) {
      value = value[0]
    }

    // Remover os parênteses externos e as aspas
    value = cleanAndStoreText(value, 1, -1);

    if (type === 'char') {
        var arraySize = 15;
        if (value.includes(',')) {
            value = '{' + value + '}';
        } else if (value.includes('"')) {
            arraySize = Math.max(arraySize, value.length - 2 + 1);
        }
        var code = type + ' ' + varName + '[' + arraySize + '] = ' + value + ';\n';
    } else {
        var code = type + ' ' + varName + ' = ' + value + ';\n';
    }

    Blockly.Arduino.definitions_['var_' + varName] = code;
    return code;
};

Blockly.Arduino['variables_declare_boolean'] = function(block) {
    var varName = block.getFieldValue('VAR_NAME');
    var value = block.getFieldValue('TYPE');
    var code = 'bool ' + varName + ' = ' + value + ';\n';
    Blockly.Arduino.definitions_['var_' + varName] = code;
    return code;
};

//Get
// Gerador de código para obter variáveis do tipo número
Blockly.Arduino['variables_get_number'] = function(block) {
    var varName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.Names.NameType.VARIABLE);
    return [varName, Blockly.Arduino.ORDER_ATOMIC];
};

// Gerador de código para obter variáveis do tipo texto
Blockly.Arduino['variables_get_text'] = function(block) {
    var varName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.Names.NameType.VARIABLE);
    return [varName, Blockly.Arduino.ORDER_ATOMIC];
};


// Gerador de código para obter variáveis do tipo booleano
Blockly.Arduino['variables_get_boolean'] = function(block) {
    var varName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('VAR'), Blockly.Names.NameType.VARIABLE);
    return [varName, Blockly.Arduino.ORDER_ATOMIC];
};


// Geradores de Funções
Blockly.Arduino['procedures_defnoreturn'] = function(block) {
  var branch = Blockly.Arduino.statementToCode(block, 'STACK');
  branch = Blockly.Arduino.addLoopTrap(branch, block.id) || '';
  branch = Blockly.Arduino.prefixLines(branch, '  ');  // Add indentation
  
  const funcName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('NAME'), Blockly.Names.NameType.PROCEDURE);
  const code = 'void ' + funcName + '() {\n' + branch + '\n}';

  // Adiciona o código dos blocos conectados
  var nextBlock = block.nextConnection && block.nextConnection.targetBlock();
  if (nextBlock) {
      code += Blockly.Arduino.blockToCode(nextBlock);
  }
  //Blockly.Arduino.definitions_[funcName] = code;
  return code;
};

Blockly.Arduino['procedures_defreturn'] = function(block) {
  var branch = Blockly.Arduino.statementToCode(block, 'STACK');
  branch = Blockly.Arduino.addLoopTrap(branch, block.id) || '';
  branch = Blockly.Arduino.prefixLines(branch, '  ');  // Add indentation
  const returnValue = Blockly.Arduino.valueToCode(block, 'RETURN', Blockly.Arduino.ORDER_NONE) || '';

  const funcName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('NAME'), Blockly.Names.NameType.PROCEDURE);

  const returnType = returnValue ? 'int' : 'void';
  const code = returnType + ' ' + funcName + '() {\n' + branch + (returnValue ? '  return ' + returnValue + ';\n' : '') + '}\n';

  // Adiciona o código dos blocos conectados
  var nextBlock = block.nextConnection && block.nextConnection.targetBlock();
  if (nextBlock) {
      code += Blockly.Arduino.blockToCode(nextBlock);
  }

  return code;
};

Blockly.Arduino['procedures_callreturn'] = function(block) {
  const funcName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('NAME'), Blockly.Names.NameType.PROCEDURE);
  const args = [];
  for (let i = 0; i < block.arguments_.length; i++) {
    args[i] = Blockly.Arduino.valueToCode(block, 'ARG' + i, Blockly.Arduino.ORDER_NONE) || 'null';
  }
  const code = funcName + '(' + args.join(', ') + ')';
  return [code, Blockly.Arduino.ORDER_FUNCTION_CALL];
};

Blockly.Arduino['procedures_callnoreturn'] = function(block) {
  const funcName = Blockly.Arduino.nameDB_.getName(block.getFieldValue('NAME'), Blockly.Names.NameType.PROCEDURE);
  const args = [];
  for (let i = 0; i < block.arguments_.length; i++) {
    args[i] = Blockly.Arduino.valueToCode(block, 'ARG' + i, Blockly.Arduino.ORDER_NONE) || 'null';
  }
  const code = funcName + '(' + args.join(', ') + ');\n';
  return code;
};

Blockly.Arduino['procedures_ifreturn'] = function(block) {
  const condition = Blockly.Arduino.valueToCode(block, 'CONDITION', Blockly.Arduino.ORDER_NONE) || 'false';
  let code = 'if (' + condition + ') {\n';
  if (block.hasReturnValue_) {
    const value = Blockly.Arduino.valueToCode(block, 'VALUE', Blockly.Arduino.ORDER_NONE) || 'null';
    code += '  return ' + value + ';\n';
  } else {
    code += '  return;\n';
  }
  code += '}\n';
  return code;
};
//End functions

Blockly.Generator.prototype.valueToCode = function(block, name, outerOrder) {
  if (isNaN(outerOrder)) {
    throw Error('Expecting valid order from block: ' + block);
  }
  var targetBlock = block.getInputTargetBlock(name);
  if (!targetBlock) {
    return ['', Blockly.Generator.ORDER_ATOMIC];
  }

  var tuple = this.blockToCode(targetBlock);
  if (!Array.isArray(tuple)) {
    tuple = [tuple, Blockly.Arduino.ORDER_ATOMIC];
  }
  var code = tuple[0];
  var innerOrder = tuple[1];
  if (isNaN(innerOrder)) {
    throw Error('Expecting valid order from value block: ' + targetBlock.type);
  }
  if (code && outerOrder <= innerOrder) {
    code = '(' + code + ')';
  }
  return [code, innerOrder];
};

Blockly.Generator.prototype.statementToCode = function(block, name) {
  var targetBlock = block.getInputTargetBlock(name);
  if (!targetBlock) {
    return ''; // Se não há bloco conectado, retorna string vazia
  }
  var code = this.blockToCode(targetBlock);
  if (Array.isArray(code)) {
    code = code[0]; // Usa o primeiro elemento do array se for um array
  }

  return code;
};

Blockly.Arduino.blockToCode = function(block) {
  if (!block) {
    return '';
  }

  if (block.isEnabled() && !block.hasDisabledReason()) {
    var func = this[block.type];
    if (typeof func !== 'function') {
      throw Error('Language "Arduino" does not know how to generate code for block type "' + block.type + '".');
    }
    var code = func.call(this, block);

    if (Array.isArray(code)) {
      return code[0] + this.scrub_(block, code[1]);
    } else {
      return this.scrub_(block, code);
    }
  } else {
    return this.scrub_(block, '');
  }
};

function cleanAndStoreText(text, startIndex, endIndex) {
    if (text.startsWith('(') && text.endsWith(')')) {
        let cleanedString = text.slice(startIndex, endIndex);
        let resultList = [cleanedString];
        return resultList[0];
    } else {
        return text;
    }
}

//Custom code
Blockly.Arduino['custom_code'] = function(block) {
  var code = block.getFieldValue('CUSTOM_CODE') + ';\n';
  return code;
};




static/custom_generators.js:
// static/custom_generators.js

Blockly.Msg.LOGIC_HUE = '210'; // Ajuste a cor conforme necessário
Blockly.Msg.LOOPS_HUE = '120'; // Ajuste a cor conforme necessário
Blockly.Msg.MATH_HUE = '230'; // Ajuste a cor conforme necessário
Blockly.Msg.TEXTS_HUE = '160'; // Ajuste a cor conforme necessário
Blockly.Msg.LISTS_HUE = '260'; // Ajuste a cor conforme necessário
Blockly.Msg.COLOUR_HUE = '20'; // Ajuste a cor conforme necessário
Blockly.Msg.VARIABLES_HUE = '330'; // Ajuste a cor conforme necessário
Blockly.Msg.PROCEDURES_HUE = '290'; // Ajuste a cor conforme necessário

Blockly.BlockSvg.START_HAT = true;
Blockly.BlockSvg.prototype.updateColour = function() {
  var colourHex = this.getColour();
  this.svgPath_.setAttribute('fill', colourHex);
  this.svgPath_.setAttribute('stroke', Blockly.utils.colour.darken(colourHex, 0.2));
  var inputList = this.inputList;
  for (var i = 0, input; input = inputList[i]; i++) {
    var fieldList = input.fieldRow;
    for (var j = 0, field; field = fieldList[j]; j++) {
      if (field instanceof Blockly.FieldLabel) {
        field.setText(field.getText());
      }
    }
  }
};

Blockly.FieldLabel.prototype.setText = function(text) {
  if (this.textElement_) {
    this.text_ = text;
    this.textElement_.textContent = text;
    this.textElement_.style.fontWeight = 'bold';
    this.textElement_.style.fill = '#FFFFFF';
  }
};


static/favicon.ico:
           +     PNG

   IHDR         \rf   orNTϢw  +;IDATxxTCzo$!	!{Fi
R *MD"(
V"JGAEł|s]Lewnyߓ'{=SΜqqq)PlF]PAY0UTFB`lFQ\<ł?6_l
`:876[	X=pcJ{Ypp:pNnmZ`NՍ9>nnNmLի`OjVVwS4 lΪ虪5CH
6i4vI\Sb0Z)Tgo FigژNM6! 6PvwJsܨ=ԤE7 
,3eD`Qr(QK	.NR%, 7Ӣ;#V<x,0N=3sB[GU
~S wwZV=Y:~VvC&9ͺЅt&l1Ԏyyn>GqUMñqF޸É-w|uyJ鉴ېݨrJE ~dqjɊzT<v:vRs	?AQ?kk5
N8rU_ EcܚT+W+{I8
1H^> $VħiWIQ<hż^4*eWj!ii/mmD&?/>VN&V+`<=gquCXa_j^:!<^<|R?[ZƤ9ݬ4j&l6CR,ǱV uhy|¦60Jus.1<x	V(UG1WHWVU:߰U/4Z
k`oMiN%=R*xDWK.	D<:mm2Ѓg"vwp}vu%Ւ IVbwbGmzQXRk(TCXyc
a	RySU]-:\W [zZmi/ ޯJB|9`5+}Rlj+w#	yz)}ckߦNcyl-cir(A?7E wZ -m6@ |( `C᷶R4Wf`n+6!ُ屇.xl1RyjZoI+KM]6@!
YfЄT;(Dے+{UsZT78Uv+Ek7R<f4j<hrv]h~L^di^Z:b2,E({_ꂠݙ (D0-x<<૽u5-<Fw,Ohj?h4./iiېc5 ;~;ȱZX  v$  چy{,3N`P胄 k ,Oce@.,yF2-[<  
1XX w@4    
 @ P    a   ;nnnTN2؅t$vz! %]A)iC + ^4sBi	):~G:ug:u 쏷i <`1?E{'/
.' vɥw
 XM  ;yp K߁ @      f ED <A΂IiVb`ʶ` pLi}k5lK``  '_^6@['!#0M SAp@!@n6psJ^pQ٨L/wd|3_ ;7$}ۚ%0@a7qӎ  y$9jSZah@ 5y`-w`?t*etӛ6=krLY0T 0zjE`ڿ=/wm,Jw_*ٰc}m._;DGϚ"x[~gywWK7uvv. ]rN\OpEŊ0DUUkQ:T*6lsRLbcJj")؈|CJ8l`'TmؓAزEi)W"а0SR(I3ZZswz5ސJ,{^gkjс>ڼM%' >T&}7Pdt
\|¨v>B2~M>Tz=mٓ;]QB2{Mf?*p86Bu);?s!^)`!*TLk:[.뗿h-UȯY6m{Ֆ 'l~}?)u`&N|iA~(jF-QC˟ހ**	 gwQX	KpHt, ~yoC#Ag<@k' I֢۪7yY$CdT.U( }ӎ* l s_"J^#!`A@67eMoeq-jץܵ?.Ut>50`ڗ.Sjtd$v{\6}I ̈9z_T䑾skV{-S;S|)3lp{s_|.[ )VwhAW7*[9%tn5HzhL q;h4|x7LrL>)fx3/$=+M_IhĘ	;ؕ,t/	aqתSW/Cv"/ [vf'c FF0h6Ui܍\Sq1D	5`/_|ǨF&(%v:='HU ;upqA- pMW!~3(wxr
,4,zJ.}~k )|GӴ9~TF>fRm7~W~lԬ$?g]k%ץAGG5Z. fjvO=}]Oyߏb[R (WRL"(DE灻6 vc1@ޑROO{;;YsT\R|9y9%Jm;vO?p*KS}{œÝsM:speْo Ϫ+9H-hEn}j{+@!Fsij75uzA#Fcy
poHaQ;6Qvw\voY u&-*kCf*
@M	) 9T$ ;gChk\أuo(~ۇR1t9yyyi^3>1VBk;0juiS(`HWHͰZCԴU	]-{Cqt[dب1~Fct͂vٛ 
gF ʧY+`T^}kyyӐQc5ҏ{J<Z[P2Pt{5! SqL! JFq5tHc&OJFZɉSS%:V^8O\	]c	@1WwrS_o^|
PNˎuAշ@\Pԅ~WX'Yx8 #s	U_0GJ jSSlswY*YE ؁ّ3a%t-\y<_)MZ}.-zMA*1r5ڛǹy_~g@`T/gPZJrϺ)3SsREyw)<{@_Ar^bJEob[.yl9yғ,BWjݾ>1G!G6%HLK ;Sܿ}A>?gۚR&WsߨBCxB|	q^Qm8?xF%<y&8}z#`6|ǤeU<`04|x9#f	߉</(<jt (	r6onr0!|<8b9'
輁x샻6Xc}e9bx:q'@ ( W}&pOyKϜHUd8QķnNSpvK&		-c)&0
!o_Z[k>QmA l( \ً^K7Ҏp.cр.z^ܣAյ,2Qȋv^+>Z'g",^ ܕ}3$={ KGM9^Ceޓ.yLF݁4)d[lxn 8i1# { &g>[?8̖껟n?(U6}bqpvugZmĿ8EuSHxɒfVձ8^9:FE! ?35Gg]H\;۶S.!] Z_~]Uh$2 ̈ws64k(B9TV/^͙+ϝmMN=K?h2pǹFO;	)vDḩi,`1$z/@! ?SeEy܀Li1;;N*VT}Uf7${e**W=2>## XSP`tT渞CqGGeS2}^o`NÌ	6gE]` 3Y\E%Y}>t\yxn1zKw'&LTP1x+眑#  0q5 ;>q</1%;nMUGI64ڦr"ouEb! `^> vvܡOUmK5*|C-4tu|#@"DrnR&C   f0p٩T54
d3R)jq BK2ƍ<+
w~
 7%7yS{W*j}ぷS==dl\@&t%8? `F\LR̗X[9x[ϜPu81,S=rg7u1)iQԁ֏IIc  % ٻ
t}*-d'[k r_|3-lIn%w+]hރ>;#~KKS?<!PH#VQJdi@켼Zl>u0
VM!ⲷ霕XI;,*vl7ƹ WL03}e;"U ;&k&}ȼZ4DmQi1g+~uf:cJ2wQӟ\L'$ ع Ou*Kor^푞_xr$-xeI|N{	$$Ցyw[u~Ƣ"p3vL597ȱ,v\ϛ>F/4:1ZrRhN/(p7<ug=s:??"/ joWT9erVGS 8 (mvmI'I3:rMws74i~W,`ܝ9w`xp $䤜^F_W_lr1sTxg%޻A)a
sK/ KF[.: 7Tˬˉ_gYm<ʺFS~RRX\5ZD˨}YϫpwoĩrHުͤGPB:ǥm`;W
\_No,gYs1p^Es7l{px
/8$T2:uc/BAA U$0slEo
\D ٴe?!ϲ?Z D}m8}]S  A@giÎ=tp~ (
`]aD@       }nνg|a0! 6 2X3ɱ4`pa'2,^d3yC}Gg^&lNr8ؼ#ՌkoSاnP+`:˖ؼ9Wq#d8a l
\=':qM;snRk? h'?	ˁE O,UTiڲ`x;e:cWo"B:aB#^`XZgr)tc75y"7ݲGxFMdm[q>B8aۊ*KiƢ@ 
aq9/Ii qSf?K//Wnh5\Ug;::٦,ZBwݦPH$e=d0])Z C               @      7ԼP ~8G/ݔlu@n÷tҹ6={\u/ۖ)@ 
!_QT:"J Vl
Գ@q⛏v$2C2p`jծ}e"f1a?GzоKw<FoqSgHk֪-mN% r-n@NuH~|!gQsb9dt`pԂo] ^da!# {rwe@pdM^k鋲9\mm- ;I
_7jZkܨcĵ[_ϾLElklsH
jG <('(v2UUDSXJIk@fdwg/Oдek9u:6Ŷ6ƶY ;<{Iy_D=pk\0`3Ag-1q( A>Yzw7>  X       @      @      hyO˕j	_#Ko7
:x! 	xʏ54d5``P`:j,އ{?KO?"2fZ:~GDZl}6B<1<*c9k1^}% /~sGuvPph]t2r461r'O,t3i;.{rA9~ۋ <Ԡq86lJ%K17oS\%6~,ruu8lklsY, 9EFZ	c\ZQӜY/CQ`P[(6ƶ(i@p۰cP3y<zv˴ZӀK~ǟѬy@<oa[녍i=o@!F@/d#Zz!]ὁ{  ^Bc. ! 9`_T2is' ' ܄  ; RX2R/; #EQǞxRS7~n>5Q05HED3VW(;'ah16kV՞+͔6& 5<L/,]~pU۷?* lO  `,-zuShW;e_ap NްisU;fOzA< 8E6!cF.~n) [-KrH/&Q_g@	՛MMoHK\I>!(4nߕKl35nJٶG0_T@ʤЍU6hLzr). f52J}n^Bn#ӇK7 4_eڎ~~2  ^lu'66wHY<NWHh50w8ph.Cq}޷ 06S-p	 p)6<`T!pA<y eHw}ISwhy`h`d,U/Y.pkl/=NNRlT8*Q!qVR 6mmm1
Ze5{`^@V0Mis~62ؤ *Bc  P                                                            PʔTMyҟ^d Yp/ ePlrCĸ>GƣR![)  S"|gUoP՝ܼ;oށ  	)a      
| 
7Om6ǴxD  J_tB5 @dހ9@@P`*ܒBFS@(AMSPd% @>	LU(郔oZ^/h0v;5()u{OL ~D ̤N~
  .@          PDȔ#'  σO5Q9O>"  8
G^>X- `ps=p	z)i  0`.r-8 <& i @ P9su+*-  8qhX@h٘lk9P Kqx(6xI&\
*'a[F9qU8h8C
-/{Rt* ! 6{nr??98֬Pb\E  \UK4ȹxZZo&<Fd)1ؖ=e@]^9A8	 -7` 6aLݧ0_ O Ҹ  pkn)x0 1y, ?PlFXKF7 v%@3) 2TAG,)}ʛ XAeQQoj3MxaHHTU*HVL`!Jr1M_ Vz%_)XczWlOܴbrG󅧗 `Oq]>a X@pSrLSv p*ا\L,/
Py 8./|ڬ)hn0$* oϾ-h!rGW3Dll6cښ&2*SSz6Y&J vl2VϯA (5nnnSSGhl_k&_[E vb[;qAqkXقi٪h9Z*XeǆbZކh{c9v&6KUc	 xl((/\4VlftB>!Ӷ͡ԦCgfPPWB=r$$g]c(0N^E͒" _%%YpSL\MN! N_?F@_z
	Q :x|((+#]%odk&;p!.
IHp	<>ˋ#~g4_9wPqł+4ˋ2/ܼmx.-V h<FJ_lpӗyߝ"̶_Ƞr#
[ZUFy<Bo7l@ݵ+]
($řK࢒Sg4Of`xCPż2\SE[žCZ C8QPL/uv*+?sv5|'J]njOm. ns/B݀S8~>SmZbex6ڛonQZYx((Rsz]ߟsB4K =;h 2|7GpWɉisg8xxaq]Z:

R.	@AQ8+3):QbdZm q}=sI ~Ws,%7|WroN|˽5pl|ꢱEO5omQێ]箅NFTb%-MIPu3Aq)
λڊy3ٞ7҉8MQprB(NPx+pj|P6kg]4#·NoBaN(Vz6JE:sBq_T[CGqSgi.N4D`8PI\S3m2ݵ`gD.*ἼWɝu>۶.N""S.k~?\'wjLY8JYf.pp:BK  0EQ!#GC T`ؓcf^P\ @ T` Ź`بr1EA PS x'ݶдglpb PV OO
phB P_ @ PF a! (E,Z] ʮtaaV(R8{p fH`A%(sBq+)՝)?;    IENDB`

static/script.js:
// static/script.js
// Função melhorada para solicitar acesso à porta serial
async function requestPort() {
    try {
        const port = await navigator.serial.requestPort();
        await port.open({ baudRate: 9600 });
        console.log('Porta serial aberta com sucesso');
        return port;
    } catch (err) {
        if (err.name === 'SecurityError') {
            console.error('Permissão negada para acessar a porta serial');
            alert('Permissão para acessar a porta serial foi negada. Por favor, conceda permissão quando solicitado.');
        } else if (err.name === 'NotFoundError') {
            console.error('Nenhuma porta serial selecionada');
            alert('Nenhuma porta serial foi selecionada. Por favor, selecione uma porta.');
        } else {
            console.error('Erro ao solicitar porta:', err);
            alert('Ocorreu um erro ao tentar acessar a porta serial. Verifique se o Arduino está conectado corretamente.');
        }
        return null;
    }
}

// Função para obter a lista de portas disponíveis
async function getPorts() {
    try {
        const response = await fetch('/ports');
        if (!response.ok) {
            throw new Error('Failed to fetch ports');
        }
        const ports = await response.json();
        return ports;
    } catch (err) {
        console.error('Error fetching ports:', err);
        return [];
    }
}

// Função para atualizar a lista de portas no dropdown
async function updatePortList() {
    const selectPort = document.getElementById('serial-port');
    selectPort.innerHTML = '<option value="">Selecione uma porta</option>';
    
    try {
        const ports = await getPorts();
        for (let port of ports) {
            const option = document.createElement('option');
            option.value = port.path;
            option.textContent = `${port.path} - ${port.manufacturer || 'Unknown'}`;
            selectPort.appendChild(option);
        }
        
        if (ports.length === 0) {
            const option = document.createElement('option');
            option.textContent = 'Nenhuma porta detectada';
            option.disabled = true;
            selectPort.appendChild(option);
        }
    } catch (err) {
        console.error('Erro ao obter portas:', err);
        const option = document.createElement('option');
        option.textContent = 'Erro ao listar portas';
        option.disabled = true;
        selectPort.appendChild(option);
    }
}


async function startSerialMonitor(port) {
    const terminal = document.getElementById('serialMonitor');
    terminal.innerHTML = ''; // Clear the terminal

    const reader = port.readable.getReader();
    const textDecoder = new TextDecoderStream();
    const readableStreamClosed = port.readable.pipeTo(textDecoder.writable);
    const readerStream = textDecoder.readable.getReader();

    try {
        while (true) {
            const { value, done } = await readerStream.read();
            if (done) break;
            const newLine = document.createElement('div');
            newLine.textContent = value;
            terminal.appendChild(newLine);
            terminal.scrollTop = terminal.scrollHeight; // Auto-scroll
        }
    } catch (err) {
        console.error('Error reading data:', err);
    } finally {
        reader.releaseLock();
    }
}

async function writeSerialData(port, data) {
    const writer = port.writable.getWriter();
    const textEncoder = new TextEncoder();
    const encodedData = textEncoder.encode(data);
    await writer.write(encodedData);
    writer.releaseLock();
}

let selectedPortPath = ''; // Variável para armazenar a porta selecionada
let selectedBoard = '';

document.addEventListener('DOMContentLoaded', function () {
    const selectPort = document.getElementById('serial-port');
    const connectButton = document.getElementById('connect-button');
    const uploadButton = document.getElementById('upload-button');
    
    if (connectButton) {
        connectButton.addEventListener('click', connectToArduino);
    }

    selectPort.addEventListener('change', function() {
        selectedPortPath = selectPort.value;
        console.log('Porta selecionada:', selectedPortPath);
        // Habilitar o botão de upload quando uma porta é selecionada
        uploadButton.disabled = !selectedPortPath;
    });


    selectPort.addEventListener('click', async function() {
        if (!('serial' in navigator)) {
            alert('Seu navegador não suporta a Web Serial API. Por favor, use um navegador compatível, como Chrome ou Edge.');
            return;
        }

        try {
            await updatePortList();
            
            if (selectPort.options.length <= 1) {
                alert('Nenhuma porta serial detectada. Verifique se o Arduino está conectado e tente novamente.');
            }
        } catch (error) {
            console.error('Erro ao atualizar lista de portas:', error);
            alert('Ocorreu um erro ao tentar listar as portas seriais. Por favor, tente novamente.');
        }
    });

    uploadButton.addEventListener('click', async function () {
        if (!selectedPortPath) {
            alert('Por favor, selecione uma porta antes de fazer o upload.');
            return;
        }

        const selectBoard = document.getElementById('board');
        const selectedBoard = selectBoard.value;

        if (!selectedBoard) {
            alert('Por favor, selecione uma placa Arduino antes de fazer o upload.');
            return;
        }

        const code = Blockly.Arduino.workspaceToCode(Blockly.getMainWorkspace());

        try {
            await uploadCode(code, selectedBoard);
        } catch (error) {
            console.error('Error uploading to Arduino:', error);
            alert('Upload failed: ' + error.message);
        }
    });

    // Atualizar a lista de portas assim que a página carregar
    updatePortList().catch(error => {
        console.error('Erro ao carregar lista de portas inicial:', error);
    });

    document.getElementById('upload-button').addEventListener('click', async function () {
        let selectPort = selectedPortPath;
        let selectBoard = selectedBoard;
        
        let = selectedPort = '';

        if (!selectPort) selectedPort = document.getElementById('serial-port').value;
        if (!selectBoard) selectedBoard = document.getElementById('board').value;

        console.log(`selectedPort: ${selectedPort} e selectedBoard: ${selectedBoard}`);
        if (!selectedPort || !selectedBoard) {
            console.error('No port or board selected');
            return;
        }

        const code = Blockly.Arduino.workspaceToCode(Blockly.getMainWorkspace());

        try {
            const port = await requestPort();
            await writeSerialData(port, code);
            alert('Code uploaded successfully!');
            startSerialMonitor(port);
        } catch (error) {
            console.error('Error uploading to Arduino:', error);
            alert('Upload failed');
        }
    });

    if (typeof Blockly === 'undefined') {
        console.error('Blockly is not defined.');
        return;
    }

    // Após carregar todos os blocos
    setTimeout(() => {
        if (Blockly.Blocks['math_change']) {
            delete Blockly.Blocks['math_change'];
        }
    }, 1000); // Ajuste o tempo conforme necessário
    
    Blockly.Themes.blackbg = Blockly.Theme.defineTheme('blackbg', {
        'base': Blockly.Themes.Classic,
        'componentStyles': {
            'workspaceBackgroundColour': '#1e1e1e',
            'toolboxBackgroundColour': 'blackBackground',
            'toolboxForegroundColour': '#fff',
            'flyoutBackgroundColour': '#252526',
            'flyoutForegroundColour': '#ccc',
            'flyoutOpacity': 1,
            'scrollbarColour': '#797979',
            'insertionMarkerColour': '#fff',
            'insertionMarkerOpacity': 0.3,
            'scrollbarOpacity': 0.4,
            'cursorColour': '#d0d0d0',
            'blackBackground': '#333',
        }
    });

    const workspace = Blockly.inject('blocklyDiv', {
        toolbox: document.getElementById('toolbox'),
        theme: Blockly.Themes.blackbg,
        zoom: {
            controls: true,
            wheel: true,
            startScale: 1.0,
            maxScale: 3,
            minScale: 0.3,
            scaleSpeed: 1.2
        },
        grid: {
            spacing: 20,
            length: 3,
            colour: '#ccc',
            snap: true
        },
        trashcan: true,
    });

    // Definindo Blockly.Arduino caso não esteja definido
    if (typeof Blockly.Arduino === 'undefined') {
        Blockly.Arduino = new Blockly.Generator('Arduino');
        Blockly.Arduino.addReservedWords('code');
        Blockly.Arduino.ORDER_ATOMIC = 0;
        Blockly.Arduino.ORDER_NONE = 99;
    }

    Blockly.Variables.createVariableButtonHandler = function(workspace, opt_callback, opt_types) {
        Blockly.prompt('Enter a name for your variable:', '', function(text) {
            if (text) {
                const variableTypes = opt_types || [''];
                Blockly.Variables.getOrCreateVariablePackage(workspace, null, text, variableTypes[0]);
                if (opt_callback) {
                    opt_callback(text);
                }
                workspace.updateToolbox(document.getElementById('toolbox'));
            }
        });
    };

    // Adicionando o callback para o botão de criação de variável
    workspace.registerButtonCallback('createVariable', function(button) {
        Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace())
            .then(() => workspace.updateToolbox(document.getElementById('toolbox')));
    });

    workspace.registerButtonCallback('createTypedVariable', function(button) {
        Blockly.Variables.createVariableButtonHandler(button.getTargetWorkspace(), null, ['Number', 'String', 'Boolean']);
        workspace.updateToolbox(document.getElementById('toolbox'));
    });

    let language = 'arduino';

    window.updateLanguage = function () {
        language = 'arduino';
        Blockly.Arduino = new Blockly.Generator('Arduino');
        Blockly.Arduino.addReservedWords('code');
        Blockly.Arduino.nameDB_ = new Blockly.Names(Blockly.Arduino.RESERVED_WORDS_);
        Blockly.Arduino.nameDB_.populateVariables(Blockly.Variables.allUsedVarModels(workspace));
        Blockly.Arduino.nameDB_.populateProcedures(Blockly.Procedures.allProcedures(workspace));
        updateCode();
    };

    //To generators
    Blockly.Arduino.valueToCode = function(block, name, outerOrder) {
        if (isNaN(outerOrder)) {
            throw Error('Expecting valid order from block: ' + block);
        }
        var targetBlock = block.getInputTargetBlock(name);
        if (!targetBlock) {
            return ['', Blockly.Arduino.ORDER_ATOMIC];
        }

        var tuple = Blockly.Arduino.blockToCode(targetBlock);
        if (!Array.isArray(tuple)) {
            tuple = [tuple, Blockly.Arduino.ORDER_ATOMIC];
        }
        var code = tuple[0];
        var innerOrder = tuple[1];
        if (isNaN(innerOrder)) {
            throw Error('Expecting valid order from value block: ' + targetBlock.type);
        }
        if (code && outerOrder <= innerOrder) {
            code = '(' + code + ')';
        }

        return [code, innerOrder];
    };

    Blockly.Arduino.statementToCode = function(block, name) {
      var targetBlock = block.getInputTargetBlock(name);
      if (!targetBlock) {
        return ''; // Se não há bloco conectado, retorna string vazia
      }
      var code = Blockly.Arduino.blockToCode(targetBlock);
      if (Array.isArray(code)) {
        code = code[0]; // Usa o primeiro elemento do array se for um array
      }
      return code;
    };

    Blockly.Arduino.blockToCode = function(block) {
        if (!block) {
            return '';
        }

        if (block.isEnabled() && !block.hasDisabledReason()) {
            var func = this[block.type];
            if (typeof func !== 'function') {
                throw Error('Language "Arduino" does not know how to generate code for block type "' + block.type + '".');
            }
            var code = func.call(this, block);

            // Se code não for um array, transforma em uma tupla
            if (!Array.isArray(code)) {
                code = [code, Blockly.Arduino.ORDER_ATOMIC];
            }

            // Adiciona o código dos blocos conectados abaixo
            var nextBlock = block.nextConnection && block.nextConnection.targetBlock();
            var nextCode = this.blockToCode(nextBlock);

            if (Array.isArray(nextBlock)) {
                nextBlock = nextBlock[0];
            }
            if (Array.isArray(nextCode)) {
                nextCode = nextCode[0];
            }

            return [code[0] + nextCode, code[1]];
        } else {
            return this.scrub_(block, '');
        }
    };

    Blockly.Arduino.scrub_ = function(block, code) {
        const nextBlock = block.nextConnection && block.nextConnection.targetBlock();
        const nextCode = Blockly.Arduino.blockToCode(nextBlock);
        return code + nextCode;
    };

    Blockly.Arduino.workspaceToCode = function(workspace) {
      if (!workspace) {
        console.warn('Blockly.Generator.workspaceToCode was called with an invalid workspace.');
        return '';
      }
      var code = [];
      this.init(workspace);
      var blocks = workspace.getTopBlocks(true);
      for (var i = 0, block; block = blocks[i]; i++) {
        var line = this.blockToCode(block);
        if (line) {
          if (Array.isArray(line)) {
            line = line[0];
          }
          code.push(line);
        }
      }
      code = code.join('\n');
      code = this.finish(code);
      return code;
    };

    function updateCode() {
      Blockly.Arduino.init(Blockly.getMainWorkspace());
      var code;
      let languageClass;
      let generator;
      try {
        switch (language) {
          case 'arduino':
            generator = Blockly.Arduino;
            languageClass = 'language-cpp';
            break;
          default:
            generator = Blockly.Arduino;
            languageClass = 'language-cpp';
            break;
        }

        generator.init(workspace);
        code = generator.workspaceToCode(Blockly.getMainWorkspace());

      } catch (error) {
        code = "// Error generating code: " + error.message;
        languageClass = 'language-cpp';
        console.error('Error generating code:', error);
      }

      const output = document.getElementById('code-output');
      output.textContent = code;
      output.className = 'hljs ' + languageClass;
      hljs.highlightElement(output);
    }

    document.getElementById('executeBtn').addEventListener('click', async () => {
        const code = Blockly.Arduino.workspaceToCode(workspace);
        const selectPort = document.getElementById('serial-port');
        const selectBoard = document.getElementById('board');
        const port = selectPort.value;
        const board = selectBoard.value;

        if (!port) {
            alert('Please select a serial port');
            return;
        }

        try {
            const port = await navigator.serial.requestPort();
            await port.open({ baudRate: 9600 });

            const writer = port.writable.getWriter();
            const encoder = new TextEncoder();
            const encodedCode = encoder.encode(code);
            await writer.write(encodedCode);
            writer.releaseLock();

            startSerialMonitor(port);
        } catch (error) {
            console.error('Error uploading to Arduino:', error);
        }
    });

    document.getElementById('saveBtn').addEventListener('click', function () {
        const xml = Blockly.Xml.workspaceToDom(workspace);
        const xmlText = Blockly.Xml.domToPrettyText(xml);
        const blob = new Blob([xmlText], {type: 'text/xml'});
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'blockly_blocks.xml';
        a.click();
    });

    document.getElementById('openBtn').addEventListener('click', function () {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.xml';
        input.onchange = function (event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const xmlText = e.target.result;
                    const xml = Blockly.utils.xml.textToDom(xmlText);
                    Blockly.Xml.domToWorkspace(xml, workspace);
                    refreshVariables(workspace);
                };
                reader.readAsText(file);
            }
        };
        input.click();
    });

    const extensionInput = document.getElementById('extensionInput');

    Blockly.getMainWorkspace().registerButtonCallback('sendExtension', function() {
        extensionInput.click();
    });

    function getBlocksFromScript(scriptContent) {
        const blockTypes = [];
        const blockDefRegex = /Blockly\.Blocks\['(.*?)'\]/g;
        let match;
        while ((match = blockDefRegex.exec(scriptContent)) !== null) {
            blockTypes.push(match[1]);
        }
        return blockTypes;
    }

    function registerExtension(scriptContent) {
        const extensionRegex = /Blockly\.Extensions\.register\('(.*?)',\s*function\s*\(\)\s*{([\s\S]*?)}\);/g;
        let match;
        while ((match = extensionRegex.exec(scriptContent)) !== null) {
            const extensionName = match[1];
            const extensionCode = match[2];
            try {
                eval(`Blockly.Extensions.register('${extensionName}', function() {${extensionCode}});`);
            } catch (error) {
                console.error(`Error registering extension ${extensionName}:`, error);
            }
        }
    }

    function registerGenerators(scriptContent) {
        function createAndRegisterGenerator(language, blockType, generatorCode) {
            if (!Blockly[language]) {
                Blockly[language] = {};
            }
            try {
                eval(`Blockly.${language}['${blockType}'] = function(block) {${generatorCode}};`);
            } catch (error) {
                console.error(`Error registering ${language} generator for block: ${blockType}`, error);
            }
        }

        const generatorRegex = /Blockly\.(\w+)\['(.*?)'\]\s*=\*\s*function\s*\(block\)\s*{([\s\S]*?)};/g;
        let match;
        while ((match = generatorRegex.exec(scriptContent)) !== null) {
            const language = match[1];
            createAndRegisterGenerator(language, match[2], match[3]);
        }

        const languages = ['Arduino'];
        languages.forEach(language => {
            const generatorRegex = new RegExp(`Blockly\\.${language}\\['(.*?)'\\]\\s*=\\s*function\\s*\\(block\\)\\s*{([\\s\\S]*?)};`, 'g');
            let match;
            while ((match = generatorRegex.exec(scriptContent)) !== null) {
                createAndRegisterGenerator(language, match[1], match[2]);
            }
        });
    }

    extensionInput.addEventListener('change', function (event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const scriptContent = e.target.result;
                
                try {
                    (new Function(scriptContent))();

                    registerExtension(scriptContent);
                    registerGenerators(scriptContent);

                    const scriptName = file.name.split('.')[0];
                    const newCategory = document.createElement('category');
                    newCategory.setAttribute('name', scriptName);
                    newCategory.setAttribute('colour', '160');

                    const blocks = getBlocksFromScript(scriptContent);
                    blocks.forEach(block => {
                        const blockNode = document.createElement('block');
                        blockNode.setAttribute('type', block);
                        newCategory.appendChild(blockNode);
                    });

                    const extensionsCategory = document.getElementById('extensionsCategory');
                    const sendExtensionButton = extensionsCategory.querySelector('button');
                    extensionsCategory.insertBefore(newCategory, sendExtensionButton.nextSibling);

                    workspace.updateToolbox(document.getElementById('toolbox'));

                    alert("Extension loaded and registered successfully!");
                } catch (error) {
                    console.error("Error loading extension:", error);
                    alert("Error loading extension:", error);
                }
            };
            reader.readAsText(file);
        }
    });

        function refreshVariables(workspace) {
        const variables = Blockly.Variables.allUsedVarModels(workspace);
        variables.sort((a, b) => a.name.localeCompare(b.name)); // Ordenar as variáveis alfabeticamente

        workspace.getAllBlocks().forEach(block => {
            if (typeof block.updateVariableFieldDropdown === 'function') {
                block.updateVariableFieldDropdown();
            }
        });

        if (workspace.toolbox_) {
            workspace.toolbox_.refreshSelection();
        }
    }

    workspace.addChangeListener(function(event) {
        if (event.type === Blockly.Events.BLOCK_CREATE || 
            event.type === Blockly.Events.BLOCK_DELETE || 
            event.type === Blockly.Events.BLOCK_CHANGE || 
            event.type === Blockly.Events.VAR_CREATE || 
            event.type === Blockly.Events.VAR_DELETE || 
            event.type === Blockly.Events.VAR_RENAME) {
            refreshVariables(workspace);
        }
        updateCode();
    });

    workspace.addChangeListener(updateCode);
});

// Função melhorada para conectar ao Arduino
async function connectToArduino() {
    const selectPort = document.getElementById('serial-port');
    const selectedPortPath = selectPort.value;
    
    if (!selectedPortPath) {
        alert('Por favor, selecione uma porta antes de conectar.');
        return;
    }
    
    try {
        const response = await fetch('/connect', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ portPath: selectedPortPath }),
        });

        if (!response.ok) {
            throw new Error('Failed to connect to port');
        }

        const result = await response.json();
        console.log('Conectado com sucesso à porta:', selectedPortPath);
        alert('Conectado com sucesso ao Arduino!');
        // Aqui você pode adicionar lógica adicional após a conexão bem-sucedida
    } catch (err) {
        console.error('Erro ao conectar à porta:', err);
        alert('Erro ao conectar à porta selecionada. Verifique a conexão e tente novamente.');
    }
}

// Atualize esta função para usar a nova rota de upload
async function connectToArduino() {
    if (!selectedPortPath) {
        alert('Por favor, selecione uma porta antes de conectar.');
        return;
    }
    
    try {
        const response = await fetch('/connect', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ portPath: selectedPortPath }),
        });

        if (!response.ok) {
            throw new Error('Failed to connect to port');
        }

        const result = await response.json();
        console.log('Conectado com sucesso à porta:', selectedPortPath);
        alert('Conectado com sucesso ao Arduino!');
        // Aqui você pode adicionar lógica adicional após a conexão bem-sucedida
    } catch (err) {
        console.error('Erro ao conectar à porta:', err);
        alert('Erro ao conectar à porta selecionada. Verifique a conexão e tente novamente.');
    }
}

async function uploadCode(code, board) {
    try {
        const response = await fetch('/upload', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ board, code, portPath: selectedPortPath }),
        });

        if (!response.ok) {
            throw new Error('Failed to upload code');
        }

        const result = await response.json();
        alert('Code uploaded successfully!');
        // Implemente a lógica para iniciar o monitor serial, se necessário
    } catch (error) {
        console.error('Error uploading to Arduino:', error);
        throw error;
    }
}

// Atualizar a lista de portas assim que a página carregar
updatePortList().catch(error => {
    console.error('Erro ao carregar lista de portas inicial:', error);
});

static/setup.js:
// static/script.js

let workspace = null;

function resizeBlocklyWorkspace() {
    if (workspace) {
        // Obtenha a largura atual do toolbox
        var toolbox = document.getElementsByClassName('blocklyToolboxDiv')[0];
        var toolboxWidth = toolbox.offsetWidth;

        // Ajuste o tamanho do workspace
        var workspaceDiv = document.getElementById('blocklyDiv');
        var workspaceWidth = workspaceDiv.offsetWidth - toolboxWidth;
        
        workspace.setWidth(workspaceWidth);
        workspace.resize();
    }
}

function initBlockly() {
    workspace = Blockly.inject('blocklyDiv', {
        toolbox: document.getElementById('toolbox'),
        scrollbars: true,
        horizontalLayout: false,
        toolboxPosition: 'start',
    });

    workspace.addChangeListener(updateCode);
    
    // Adicione um pequeno atraso para garantir que o toolbox seja renderizado completamente
    setTimeout(resizeBlocklyWorkspace, 100);
}

function updateCode(event) {
    var code = Blockly.JavaScript.workspaceToCode(workspace);
    document.getElementById('code-output').textContent = code;
    hljs.highlightElement(document.getElementById('code-output'));
}

window.addEventListener('resize', resizeBlocklyWorkspace);

document.addEventListener('DOMContentLoaded', function() {

    // Código para redimensionamento
    const container = document.querySelector('.main-content');
    const outputContainer = document.getElementById('output-container');
    const resizeHandle = document.querySelector('.resize-handle');
    let isResizing = false;

    resizeHandle.addEventListener('mousedown', function(e) {
        isResizing = true;
        document.addEventListener('mousemove', handleMouseMove);
        document.addEventListener('mouseup', stopResize);
    });

    function handleMouseMove(e) {
        if (!isResizing) return;
        const containerRect = container.getBoundingClientRect();
        const newWidth = containerRect.right - e.clientX;
        outputContainer.style.width = `${newWidth}px`;
    }

    function stopResize() {
        isResizing = false;
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', stopResize);
    }

});

static/style.css:
/* static/style.css */

body {
    font-size: 18px !important; 
    font-family: Arial, sans-serif;
    background-color: #2b2b2b;
    color: #f1f1f1;
    margin: 0;
    padding: 0;
}

header {
    background-color: #1e1e1e;
    padding: 10px 0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

nav ul {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    justify-content: center;
}

nav ul li {
    margin: 0 15px;
    position: relative;
}

nav ul li a {
    color: #f1f1f1;
    text-decoration: none;
    font-weight: bold;
}

nav ul li a:hover {
    color: #ff9800;
}

nav ul li ul {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background-color: #1e1e1e;
    padding: 10px 0;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    z-index: 1000;
}

nav ul li:hover ul {
    display: block;
}

nav ul li ul li {
    margin: 0;
}

nav ul li ul li a {
    padding: 10px 20px;
    display: block;
}

nav ul li ul li a:hover {
    background-color: #444;
}

.container {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 20px;
    box-sizing: border-box;
}

.main-content {
    display: flex;
    flex-direction: row;
    height: calc(100vh - 200px);
    margin-bottom: 20px;
}

.editor-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-right: 10px;
}

.output-container {
    width: 300px;
    min-width: 200px;
    max-width: 50%;
    position: relative;
    background-color: #1e1e1e;
    border: 2px solid #444;
    border-radius: 8px;
    padding: 20px;
    overflow: hidden;
}

.resize-handle {
    position: absolute;
    left: -5px;
    top: 0;
    bottom: 0;
    width: 10px;
    cursor: ew-resize;
}

.blockly-area {
    flex: 1;
    min-height: 200px;
    border: 2px solid #444;
    border-radius: 8px;
    background-color: #1e1e1e;
}

#code-output {
    width: 100%;
    height: calc(100% - 40px);
    border: none;
    background-color: transparent;
    padding: 10px;
    overflow: auto;
    white-space: pre;
}

.serial-monitor-container {
    height: 200px;
}

.serial-monitor {
    height: calc(100% - 40px);
    width: 100%;
    overflow-y: scroll;
    background: #f1f1f1;
    color: #000;
    padding: 10px;
    border: 2px solid #444;
    border-radius: 8px;
    font-family: 'Courier New', Courier, monospace;
}

h2 {
    color: #ffffff;
}

.blocklyText {
    fill: #000000 !important;
}

select, button {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background-color: #444;
    color: #f1f1f1;
    border: none;
    border-radius: 4px;
}

.hljs {
    background: #1e1e1e;
    color: #f1f1f1;
}

.blocklyTreeLabel {
    color: #ffffff;
    font-weight: bold;
    font-size: 16px !important; /* Aumenta o tamanho da fonte das categorias */
    line-height: 1.5 !important; /* Ajusta o espaçamento entre linhas */
    white-space: normal !important;
    word-wrap: break-word !important;
}

/* Ajuste o tamanho mínimo dos blocos no flyout para evitar cortes */
.blocklyFlyoutButton {
    min-width: 200px !important;
}

.blocklyTreeRow {
    height: auto !important; /* Permite que a altura da linha se ajuste ao conteúdo */
    min-height: 32px !important; /* Define uma altura mínima para as linhas */
    padding-top: 5px !important;
    padding-bottom: 5px !important;
}

/* Aumenta o tamanho da fonte dos blocos no flyout */
.blocklyFlyoutButton .blocklyText {
    font-size: 14px !important;
}

.blocklyFlyoutLabelText {
    font-size: 14px !important;
}

/* Ajusta o tamanho da fonte dos textos dentro dos blocos */
.blocklyText {
    font-size: 12px !important;
}

/* Ajusta o tamanho dos campos de entrada nos blocos */
.blocklyHtmlInput {
    font-size: 12px !important;
}

/* Aumenta o tamanho do ícone de expansão das categorias */
.blocklyTreeIconOpen,
.blocklyTreeIconClosed {
    width: 20px !important;
    height: 20px !important;
}

/* Ajusta o espaçamento dentro do toolbox */
.blocklyToolboxDiv {
    width: 250px !important; /* Aumente este valor conforme necessário */
    padding: 5px !important;
}

/* Ajuste o layout do workspace para acomodar o toolbox mais largo */
.blocklyWorkspace {
    left: 250px !important; /* Deve ser o mesmo valor da largura do toolbox */
}



/* Ajustes adicionais para melhorar a aparência */
#upload-button {
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
}

#upload-button:hover {
    background-color: #45a049;
}

label {
    display: block;
    margin-bottom: 5px;
    color: #ddd;
}

/* Estilos para tornar a interface mais responsiva */
@media (max-width: 768px) {
    .main-content {
        flex-direction: column;
    }

    .editor-container, .output-container {
        width: 100%;
        max-width: 100%;
        margin-right: 0;
        margin-bottom: 20px;
    }

    .resize-handle {
        display: none;
    }
}

/*Controls*/
.arduino-controls-container {
    font-size: 18px !important; 
    margin-bottom: 20px;
    background-color: #333;
    padding: 15px;
    border-radius: 8px;
}

.control-group {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
}

.control-group:last-child {
    margin-bottom: 0;
}

.control-group label {
    flex: 0 0 150px;
    margin-right: 15px;
    color: #f1f1f1;
}

.input-button-group {
    display: flex;
    flex: 1;
}

.input-button-group select {
    font-weight: bold; !important;
    font-size: 30;
    flex: 1;
    margin-right: 10px;
    padding: 8px;
    background-color: #444;
    color: #f1f1f1;
    border: 1px solid #555;
    border-radius: 4px;
}

.input-button-group button {
    font-weight: bold; !important;
    font-size: 30;
    padding: 8px 15px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.input-button-group button:hover {
    background-color: #45a049;
}

#connect-button {
    background-color: #2196F3;
}

#connect-button:hover {
    background-color: #1976D2;
}

#upload-button {
    background-color: #FF9800;
}

#upload-button:hover {
    background-color: #F57C00;
}


